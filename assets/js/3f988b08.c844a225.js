"use strict";(self.webpackChunkupb_rustworkshop_github_io=self.webpackChunkupb_rustworkshop_github_io||[]).push([[2573],{8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var r=t(6540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},9281:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"tauri/build-your-own-text-editor/tauri-arhitecture","title":"Tauri Architecture","description":"\\"A bridge isn\'t just a path; it\'s a contract between two distinct lands.\\"","source":"@site/docs/tauri/2.build-your-own-text-editor/1.tauri-arhitecture.md","sourceDirName":"tauri/2.build-your-own-text-editor","slug":"/tauri/build-your-own-text-editor/tauri-arhitecture","permalink":"/docs/tauri/build-your-own-text-editor/tauri-arhitecture","draft":false,"unlisted":false,"editUrl":"https://github.com/UPB-RustWorkshop/upb-rustworkshop.github.io/edit/main/docs/tauri/2.build-your-own-text-editor/1.tauri-arhitecture.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Tauri Architecture"},"sidebar":"tutorialSidebar","previous":{"title":"Rust Essentials","permalink":"/docs/tauri/build-your-own-text-editor/rust-fundamentals"},"next":{"title":"Core Functionalities","permalink":"/docs/tauri/build-your-own-text-editor/core-funtionalities"}}');var s=t(4848),i=t(8453);const o={title:"Tauri Architecture"},a="Tauri Architecture: The Rust-TS Bridge",c={},l=[{value:"<strong>1. The Project Structure</strong>",id:"1-the-project-structure",level:3},{value:"<strong>2. The Backend: Exposing a Command</strong>",id:"2-the-backend-exposing-a-command",level:3},{value:"<strong>3. The Handler: The Rust &quot;Switchboard&quot;</strong>",id:"3-the-handler-the-rust-switchboard",level:3},{value:"<strong>4. The Frontend: Calling a Command</strong>",id:"4-the-frontend-calling-a-command",level:3},{value:"<strong>The Contract: <code>Result</code> \u2194 <code>Promise</code></strong>",id:"the-contract-result--promise",level:3}];function d(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"tauri-architecture-the-rust-ts-bridge",children:"Tauri Architecture: The Rust-TS Bridge"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\"A bridge isn't just a path; it's a contract between two distinct lands.\""})}),"\n",(0,s.jsx)(n.p,{children:'You have calibrated your Rust tools. Now, we must understand the "map" of a Tauri application.'}),"\n",(0,s.jsxs)(n.p,{children:["A Tauri app is ",(0,s.jsx)(n.strong,{children:"not"})," one single program. It is two applications running in harmony:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"The Backend (Rust):"}),' A native, high-performance system process. This is the "Engine."']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"The Frontend (WebView):"}),' A modern web browser view running your HTML, CSS, and TypeScript. This is the "Cockpit."']}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:'This document explains the "medium" or "bridge" that allows them to communicate.'}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"1-the-project-structure",children:(0,s.jsx)(n.strong,{children:"1. The Project Structure"})}),"\n",(0,s.jsx)(n.p,{children:"When you create a Tauri project, you will see two primary folders. Understanding this separation is key."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-plaintext",children:'my-text-editor/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main.ts         # Your Frontend (TypeScript)\n\u2502   \u251c\u2500\u2500 index.html      # Your Frontend (HTML)\n\u2502   \u2514\u2500\u2500 ...             # (CSS, other TS files)\n\u2502\n\u251c\u2500\u2500 src-tauri/\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u2514\u2500\u2500 main.rs     # Your Backend (Rust)\n\u2502   \u251c\u2500\u2500 Cargo.toml      # Your Backend\'s dependencies\n\u2502   \u2514\u2500\u2500 tauri.conf.json # The "Manifest" that links them\n\u2502\n\u2514\u2500\u2500 ...\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"src/"})}),": This is a standard web project. It has no access to the filesystem or any native features ",(0,s.jsx)(n.em,{children:"until"})," you ask Rust for them."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"src-tauri/"})}),": This is a standard Rust project. It has no UI ",(0,s.jsx)(n.em,{children:"until"})," you attach the WebView to it."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"tauri.conf.json"})}),": This file is the architect. It defines the app's window, sets security permissions, and tells the Rust backend which frontend to load."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"2-the-backend-exposing-a-command",children:(0,s.jsx)(n.strong,{children:"2. The Backend: Exposing a Command"})}),"\n",(0,s.jsxs)(n.p,{children:['You cannot call a Rust function from TypeScript directly. You must "expose" it as a ',(0,s.jsx)(n.strong,{children:"Tauri Command"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["This is done with a macro: ",(0,s.jsx)(n.code,{children:"#[tauri::command]"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Let's look at a simple example in ",(0,s.jsx)(n.code,{children:"src-tauri/src/main.rs"}),". We'll use the ",(0,s.jsx)(n.code,{children:"Result"}),' type you learned about in the "Rust Essentials" module.']}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'// In src-tauri/src/main.rs\n\n// This macro transforms the Rust function into something Tauri can manage\n#[tauri::command]\nfn greet(name: String) -> Result<String, String> {\n    if name.is_empty() {\n        // If we return an Err, it rejects the promise in TypeScript\n        Err("Name cannot be empty!".to_string())\n    } else {\n        // If we return Ok, it resolves the promise in TypeScript\n        Ok(format!("Hello, {}!", name))\n    }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"3-the-handler-the-rust-switchboard",children:(0,s.jsx)(n.strong,{children:'3. The Handler: The Rust "Switchboard"'})}),"\n",(0,s.jsxs)(n.p,{children:["Just defining the command isn't enough. We must register it with Tauri's ",(0,s.jsx)(n.strong,{children:"Invoke Handler"})," in our ",(0,s.jsx)(n.code,{children:"main()"})," function."]}),"\n",(0,s.jsx)(n.p,{children:'Think of the handler as a "switchboard" or "function router." It listens for string-based messages from the frontend and routes them to the correct Rust function.'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"// In src-tauri/src/main.rs\n\nfn main() {\n    tauri::Builder::default()\n        // This line registers our 'greet' command\n        .invoke_handler(tauri::generate_handler![\n            greet\n            // All other commands you write will be listed here\n        ])\n        .run(tauri::generate_context!())\n        .expect(\"error while running tauri application\");\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"4-the-frontend-calling-a-command",children:(0,s.jsx)(n.strong,{children:"4. The Frontend: Calling a Command"})}),"\n",(0,s.jsxs)(n.p,{children:["Now for the final piece: calling our ",(0,s.jsx)(n.code,{children:"greet"})," command from TypeScript. We use the ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"invoke"})})," function from the ",(0,s.jsx)(n.code,{children:"@tauri-apps/api"})," library."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"invoke"})," is an ",(0,s.jsx)(n.strong,{children:"async"})," function. It sends a message to Rust and waits for a response."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// In src/main.ts\nimport { invoke } from '@tauri-apps/api';\n\nasync function sayHello() {\n  try {\n    // 1. We call 'invoke' with the Rust function's name (snake_case)\n    // 2. We pass arguments in an object (camelCase keys)\n    const response: string = await invoke('greet', { name: 'World' });\n    \n    // This runs if Rust returned Ok()\n    console.log(response); // \"Hello, World!\"\n    \n  } catch (error) {\n    // This runs if Rust returned Err()\n    console.error(error); // \"Name cannot be empty!\"\n  }\n}\n\n// Example of the error case\nsayHello();\nawait invoke('greet', { name: '' }); // This will trigger the catch block\n"})}),"\n",(0,s.jsx)(n.h3,{id:"the-contract-result--promise",children:(0,s.jsxs)(n.strong,{children:["The Contract: ",(0,s.jsx)(n.code,{children:"Result"})," \u2194 ",(0,s.jsx)(n.code,{children:"Promise"})]})}),"\n",(0,s.jsx)(n.p,{children:'You have just seen the "medium" in action. It\'s a simple, powerful contract:'}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A Rust ",(0,s.jsx)(n.code,{children:"Result::Ok(value)"})," ",(0,s.jsx)(n.strong,{children:"resolves"})," the JavaScript ",(0,s.jsx)(n.code,{children:"Promise(value)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["A Rust ",(0,s.jsx)(n.code,{children:"Result::Err(error)"})," ",(0,s.jsx)(n.strong,{children:"rejects"})," the JavaScript ",(0,s.jsx)(n.code,{children:"Promise(error)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:['This allows you to write safe, robust Rust code (as seen in "Rust Essentials") and handle errors gracefully in your frontend using standard ',(0,s.jsx)(n.code,{children:"try...catch"})," blocks."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:'"The bridge is built. Now, let\'s send traffic."'}),"\n",(0,s.jsx)(n.em,{children:"Ready to build the editor's core?"})," \ud83d\udd27"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);