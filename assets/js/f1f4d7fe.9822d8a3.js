"use strict";(self.webpackChunkupb_rustworkshop_github_io=self.webpackChunkupb_rustworkshop_github_io||[]).push([[6006],{140:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/duty_cycle-1ff8d97f4bd060f866d5c6065da60c99.png"},1946:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/photoresistor-93b2c60234e6e6ce1015f694e550fce1.png"},2154:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/stm32u545re_timers_cont-867ee8753bb889738facdf04519a5f8f.png"},2193:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/stm32u5-pinout-101fa7dc84d69045ebdec72326c1db46.jpeg"},2680:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/sampling_values-44d287bb9a945455cd1168efe4352357.svg"},3019:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/lab_board-68f39478a171a3ee9a911ed6c50b67ef.jpg"},3107:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/alarm-9123adf62510936424b4888da274f82c.svg"},3151:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/hse-3cd2d69363428797edb45d2615486ade.png"},3743:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/board_rgb-9b943c738872af6e5407c6d80cf50354.jpg"},3952:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/digital_signal-fb5afef385984f5a23322d339559c85d.png"},4552:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/counter-f510d875d964f5993ebfa39e196df625.svg"},4557:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/photoresistor_wiring-fec82e46ceca20f9018410bce236b23e.png"},4891:(e,s,n)=>{n.d(s,{A:()=>i});const i="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSI2OTFweCIgaGVpZ2h0PSIyMjFweCIgdmlld0JveD0iLTAuNSAtMC41IDY5MSAyMjEiPjxkZWZzPjxzdHlsZT5Aa2V5ZnJhbWVzIGdlLWZsb3ctYW5pbWF0aW9uLTNBNHIyVmhzclJtdzN1SURUTGFoIHsmI3hhOyAgdG8geyYjeGE7ICAgIHN0cm9rZS1kYXNob2Zmc2V0OiAwOyYjeGE7ICB9JiN4YTt9PC9zdHlsZT48L2RlZnM+PGc+PGc+PHBhdGggZD0iTSAxMzAuMSAzNy41IEwgNDIwIDM3LjUgTCA0MjAgMTQ5LjkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzNhN2U4NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiIHN0cm9rZS1kYXNoYXJyYXk9IjgiIHN0eWxlPSJhbmltYXRpb246IDEwMDBtcyBlYXNlLWluLW91dCAwcyBpbmZpbml0ZSBhbHRlcm5hdGUgbm9uZSBydW5uaW5nIGdlLWZsb3ctYW5pbWF0aW9uLTNBNHIyVmhzclJtdzN1SURUTGFoOyBzdHJva2UtZGFzaG9mZnNldDogMTZweDsiLz48cGF0aCBkPSJNIDEyMy4zNSAzNy41IEwgMTMyLjM1IDMzIEwgMTMwLjEgMzcuNSBMIDEzMi4zNSA0MiBaIiBmaWxsPSIjM2E3ZTg2IiBzdHJva2U9IiMzYTdlODYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHBhdGggZD0iTSA0MjAgMTU2LjY1IEwgNDE1LjUgMTQ3LjY1IEwgNDIwIDE0OS45IEwgNDI0LjUgMTQ3LjY1IFoiIGZpbGw9IiMzYTdlODYiIHN0cm9rZT0iIzNhN2U4NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48L2c+PGc+PHBhdGggZD0iTSAxMzAuMSAzNy41IEwgMjgwIDM3LjUgTCAyODAgMTQ5LjkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzNhN2U4NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiIHN0cm9rZS1kYXNoYXJyYXk9IjgiIHN0eWxlPSJhbmltYXRpb246IDEwMDBtcyBlYXNlLWluLW91dCAwcyBpbmZpbml0ZSBhbHRlcm5hdGUgbm9uZSBydW5uaW5nIGdlLWZsb3ctYW5pbWF0aW9uLTNBNHIyVmhzclJtdzN1SURUTGFoOyBzdHJva2UtZGFzaG9mZnNldDogMTZweDsiLz48cGF0aCBkPSJNIDEyMy4zNSAzNy41IEwgMTMyLjM1IDMzIEwgMTMwLjEgMzcuNSBMIDEzMi4zNSA0MiBaIiBmaWxsPSIjM2E3ZTg2IiBzdHJva2U9IiMzYTdlODYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHBhdGggZD0iTSAyODAgMTU2LjY1IEwgMjc1LjUgMTQ3LjY1IEwgMjgwIDE0OS45IEwgMjg0LjUgMTQ3LjY1IFoiIGZpbGw9IiMzYTdlODYiIHN0cm9rZT0iIzNhN2U4NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48L2c+PGc+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7IiBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDFweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAyNHB4OyBtYXJnaW4tbGVmdDogMTY1cHg7Ij48ZGl2IHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyIgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogIzRjN2M4NTsgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOyAiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDc2LCAxMjQsIDEzMyk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IGJhY2tncm91bmQtY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1KTsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiPlNEQTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxNjUiIHk9IjI3IiBmaWxsPSIjNGM3Yzg1IiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjExcHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlNEQTwvdGV4dD48L3N3aXRjaD48L2c+PC9nPjxnPjxwYXRoIGQ9Ik0gMTMwLjEgMzcuNSBMIDYwMCAzNy41IEwgNjAwIDE0OS45IiBmaWxsPSJub25lIiBzdHJva2U9IiMzYTdlODYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ic3Ryb2tlIiBzdHJva2UtZGFzaGFycmF5PSI4IiBzdHlsZT0iYW5pbWF0aW9uOiAxMDAwbXMgZWFzZS1pbi1vdXQgMHMgaW5maW5pdGUgYWx0ZXJuYXRlIG5vbmUgcnVubmluZyBnZS1mbG93LWFuaW1hdGlvbi0zQTRyMlZoc3JSbXczdUlEVExhaDsgc3Ryb2tlLWRhc2hvZmZzZXQ6IDE2cHg7Ii8+PHBhdGggZD0iTSAxMjMuMzUgMzcuNSBMIDEzMi4zNSAzMyBMIDEzMC4xIDM3LjUgTCAxMzIuMzUgNDIgWiIgZmlsbD0iIzNhN2U4NiIgc3Ryb2tlPSIjM2E3ZTg2IiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxwYXRoIGQ9Ik0gNjAwIDE1Ni42NSBMIDU5NS41IDE0Ny42NSBMIDYwMCAxNDkuOSBMIDYwNC41IDE0Ny42NSBaIiBmaWxsPSIjM2E3ZTg2IiBzdHJva2U9IiMzYTdlODYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxnPjxwYXRoIGQ9Ik0gMTIwIDExMi41IEwgMzQwIDExMi41IEwgMzQwIDE1My42MyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA5OTAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiIHN0cm9rZS1kYXNoYXJyYXk9IjgiIHN0eWxlPSJhbmltYXRpb246IDUwMG1zIGxpbmVhciAwcyBpbmZpbml0ZSBub3JtYWwgbm9uZSBydW5uaW5nIGdlLWZsb3ctYW5pbWF0aW9uLTNBNHIyVmhzclJtdzN1SURUTGFoOyBzdHJva2UtZGFzaG9mZnNldDogMTZweDsiLz48cGF0aCBkPSJNIDM0MCAxNTguODggTCAzMzYuNSAxNTEuODggTCAzNDAgMTUzLjYzIEwgMzQzLjUgMTUxLjg4IFoiIGZpbGw9IiMwMDk5MDAiIHN0cm9rZT0iIzAwOTkwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxnPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxcHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTAxcHg7IG1hcmdpbi1sZWZ0OiAxNjVweDsiPjxkaXYgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiAjMDA5OTAwOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7ICI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDExcHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMTUzLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOyB3aGl0ZS1zcGFjZTogbm93cmFwOyI+U0NMPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjE2NSIgeT0iMTA0IiBmaWxsPSIjMDA5OTAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjExcHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlNDTDwvdGV4dD48L3N3aXRjaD48L2c+PC9nPjxnPjxwYXRoIGQ9Ik0gMTIwIDExMi41IEwgNDgwIDExMi41IEwgNDgwIDE1My42MyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA5OTAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiIHN0cm9rZS1kYXNoYXJyYXk9IjgiIHN0eWxlPSJhbmltYXRpb246IDUwMG1zIGxpbmVhciAwcyBpbmZpbml0ZSBub3JtYWwgbm9uZSBydW5uaW5nIGdlLWZsb3ctYW5pbWF0aW9uLTNBNHIyVmhzclJtdzN1SURUTGFoOyBzdHJva2UtZGFzaG9mZnNldDogMTZweDsiLz48cGF0aCBkPSJNIDQ4MCAxNTguODggTCA0NzYuNSAxNTEuODggTCA0ODAgMTUzLjYzIEwgNDgzLjUgMTUxLjg4IFoiIGZpbGw9IiMwMDk5MDAiIHN0cm9rZT0iIzAwOTkwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxnPjxwYXRoIGQ9Ik0gMTIwIDExMi41IEwgNjYwIDExMi41IEwgNjYwIDE1My42MyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA5OTAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiIHN0cm9rZS1kYXNoYXJyYXk9IjgiIHN0eWxlPSJhbmltYXRpb246IDUwMG1zIGxpbmVhciAwcyBpbmZpbml0ZSBub3JtYWwgbm9uZSBydW5uaW5nIGdlLWZsb3ctYW5pbWF0aW9uLTNBNHIyVmhzclJtdzN1SURUTGFoOyBzdHJva2UtZGFzaG9mZnNldDogMTZweDsiLz48cGF0aCBkPSJNIDY2MCAxNTguODggTCA2NTYuNSAxNTEuODggTCA2NjAgMTUzLjYzIEwgNjYzLjUgMTUxLjg4IFoiIGZpbGw9IiMwMDk5MDAiIHN0cm9rZT0iIzAwOTkwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxnPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMjAiIGhlaWdodD0iMTUwIiByeD0iMTgiIHJ5PSIxOCIgZmlsbD0iI2ZmY2M5OSIgc3Ryb2tlPSIjMzYzOTNkIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxnPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA3NXB4OyBtYXJnaW4tbGVmdDogMXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiIGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+Q29udHJvbGxlcjwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI2MCIgeT0iNzkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5Db250cm9sbGVyPC90ZXh0Pjwvc3dpdGNoPjwvZz48L2c+PGc+PHJlY3QgeD0iMzkwIiB5PSIxNjAiIHdpZHRoPSIxMjAiIGhlaWdodD0iNjAiIHJ4PSI5IiByeT0iOSIgZmlsbD0iI2IwZTNlNiIgc3Ryb2tlPSIjMGU4MDg4IiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxnPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxOTBweDsgbWFyZ2luLWxlZnQ6IDM5MXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiIGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+PGRpdj5UYXJnZXQ8L2Rpdj5AMHgxMjwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI0NTAiIHk9IjE5NCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlRhcmdldEAweDEyPC90ZXh0Pjwvc3dpdGNoPjwvZz48L2c+PGc+PHJlY3QgeD0iMjUwIiB5PSIxNjAiIHdpZHRoPSIxMjAiIGhlaWdodD0iNjAiIHJ4PSI5IiByeT0iOSIgZmlsbD0iI2IwZTNlNiIgc3Ryb2tlPSIjMGU4MDg4IiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxnPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxOTBweDsgbWFyZ2luLWxlZnQ6IDI1MXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiIGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+PGRpdj5UYXJnZXQ8L2Rpdj5AMHgxNzwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIzMTAiIHk9IjE5NCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlRhcmdldEAweDE3PC90ZXh0Pjwvc3dpdGNoPjwvZz48L2c+PGc+PHJlY3QgeD0iNTcwIiB5PSIxNjAiIHdpZHRoPSIxMjAiIGhlaWdodD0iNjAiIHJ4PSI5IiByeT0iOSIgZmlsbD0iI2IwZTNlNiIgc3Ryb2tlPSIjMGU4MDg4IiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxnPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxOTBweDsgbWFyZ2luLWxlZnQ6IDU3MXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiIGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+PGRpdj5UYXJnZXQ8L2Rpdj5AMHg1ZTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI2MzAiIHk9IjE5NCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlRhcmdldEAweDVlPC90ZXh0Pjwvc3dpdGNoPjwvZz48L2c+PC9nPjxzd2l0Y2g+PGcgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ii8+PGEgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtNSkiIHhsaW5rOmhyZWY9Imh0dHBzOi8vd3d3LmRyYXdpby5jb20vZG9jL2ZhcS9zdmctZXhwb3J0LXRleHQtcHJvYmxlbXMiIHRhcmdldD0iX2JsYW5rIj48dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEwcHgiIHg9IjUwJSIgeT0iMTAwJSI+VGV4dCBpcyBub3QgU1ZHIC0gY2Fubm90IGRpc3BsYXk8L3RleHQ+PC9hPjwvc3dpdGNoPjwvc3ZnPg=="},5357:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/nyquist_theorem-436cb31254d8dc2736da55165cb16b26.png"},5603:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/board_photoresistor-b86a3821e57bba6988f80a75442e2a4c.jpg"},6272:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/analog_signal-ee6e6499b17b16b8767bfa035eef7f27.png"},6394:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/pwm_led-ab77a3a86e59318f34cdadd308ea309f.gif"},6507:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/i2c_10bit_address_transmission-7b5391881b3650f425af60363c835c64.svg"},6690:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/clock_signal-49541bcc52f09f14d1e19e36915c823f.png"},7102:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/pulse-width-modulation-signal-diagrams-average-e8f71f3620c486efcdefc7756a750c3b.png"},7517:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/i2c_7bit_address_transmission-dbcbcdc041a2fb9a7dcab8310750970d.svg"},8217:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/servo_pins-6ad0d0a8866611b7f7d1326795a66968.jpg"},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>r});var i=n(6540);const a={},t=i.createContext(a);function l(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),i.createElement(t.Provider,{value:s},e.children)}},8971:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>o,frontMatter:()=>l,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"embassy/index","title":"Embassy","description":"Prerequisites","source":"@site/docs/embassy/index.md","sourceDirName":"embassy","slug":"/embassy/","permalink":"/docs/embassy/","draft":false,"unlisted":false,"editUrl":"https://github.com/UPB-RustWorkshop/upb-rustworkshop.github.io/edit/main/docs/embassy/index.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Slint Desktop Applications","permalink":"/docs/slint/"},"next":{"title":"Edge AI","permalink":"/docs/edge_ai/"}}');var a=n(4848),t=n(8453);const l={sidebar_position:5},r="Embassy",c={},h=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"The Rust toolchain",id:"the-rust-toolchain",level:3},{value:"Linux",id:"linux",level:4},{value:"Windows",id:"windows",level:4},{value:"<code>probe-rs</code>",id:"probe-rs",level:3},{value:"Hardware support overview",id:"hardware-support-overview",level:2},{value:"STM32 Nucleo-U545RE-Q",id:"stm32-nucleo-u545re-q",level:3},{value:"Documentation",id:"documentation",level:2},{value:"GPIO",id:"gpio",level:3},{value:"What is GPIO?",id:"what-is-gpio",level:4},{value:"Configuring GPIO Pins",id:"configuring-gpio-pins",level:4},{value:"Timing",id:"timing",level:3},{value:"Clocks",id:"clocks",level:4},{value:"Counters",id:"counters",level:4},{value:"SysTick",id:"systick",level:4},{value:"Timers",id:"timers",level:4},{value:"Analog and Digital Signals",id:"analog-and-digital-signals",level:3},{value:"Pulse-Width Modulation (PWM)",id:"pulse-width-modulation-pwm",level:3},{value:"Examples of hardware controlled through PWM",id:"examples-of-hardware-controlled-through-pwm",level:4},{value:"How to wire an RGB LED",id:"how-to-wire-an-rgb-led",level:4},{value:"How to wire a servo motor",id:"how-to-wire-a-servo-motor",level:4},{value:"PWM in Embassy-rs",id:"pwm-in-embassy-rs",level:4},{value:"Controlling a Servo Motor Using PWM",id:"controlling-a-servo-motor-using-pwm",level:4},{value:"Analog-to-Digital Converter (ADC)",id:"analog-to-digital-converter-adc",level:3},{value:"Nyquist-Shannon Sampling Theorem",id:"nyquist-shannon-sampling-theorem",level:4},{value:"Examples of analog sensors",id:"examples-of-analog-sensors",level:4},{value:"How to wire a photoresistor",id:"how-to-wire-a-photoresistor",level:4},{value:"ADC in Embassy-rs",id:"adc-in-embassy-rs",level:4},{value:"Inter-Integrated Circuit (I2C)",id:"inter-integrated-circuit-i2c",level:3},{value:"Configuration",id:"configuration",level:4},{value:"Data transmission",id:"data-transmission",level:4},{value:"Initiation",id:"initiation",level:5},{value:"Transmission",id:"transmission",level:5},{value:"End",id:"end",level:5},{value:"I2C in Embassy",id:"i2c-in-embassy",level:4},{value:"Reading from a target",id:"reading-from-a-target",level:4},{value:"Writing to a target",id:"writing-to-a-target",level:4},{value:"Tasks",id:"tasks",level:2},{value:"Hi, I am new here!",id:"hi-i-am-new-here",level:3},{value:"Baby steps",id:"baby-steps",level:4},{value:"Use the button",id:"use-the-button",level:4},{value:"Now let&#39;s use &#39;em all",id:"now-lets-use-em-all",level:4},{value:"Sing your own tune!",id:"sing-your-own-tune",level:3},{value:"Configure the PWM",id:"configure-the-pwm",level:4},{value:"A crumb of music theory?",id:"a-crumb-of-music-theory",level:4},{value:"A bunch of constants",id:"a-bunch-of-constants",level:4},{value:"Playing one octave",id:"playing-one-octave",level:4},{value:"Finally, some good music",id:"finally-some-good-music",level:4},{value:"My own thermometer!",id:"my-own-thermometer",level:3},{value:"Disco party",id:"disco-party",level:4},{value:"The temperature is rising",id:"the-temperature-is-rising",level:4},{value:"The last step",id:"the-last-step",level:4},{value:"Smile and Wave!",id:"smile-and-wave",level:3}];function d(e){const s={a:"a",admonition:"admonition",annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",math:"math",mdxAdmonitionTitle:"mdxAdmonitionTitle",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",mtext:"mtext",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"embassy",children:"Embassy"})}),"\n",(0,a.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsx)(s.h3,{id:"the-rust-toolchain",children:"The Rust toolchain"}),"\n",(0,a.jsx)(s.p,{children:"In order to install the tools needed to compile Rust code, follow the next steps, depending on your operating system."}),"\n",(0,a.jsx)(s.h4,{id:"linux",children:"Linux"}),"\n",(0,a.jsx)(s.p,{children:"Run the this command in terminal:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n"})}),"\n",(0,a.jsxs)(s.p,{children:["This downloads and runs ",(0,a.jsx)(s.code,{children:"rustup-init.sh"}),", which in turn downloads and runs the correct version of the ",(0,a.jsx)(s.code,{children:"rustup-init"})," executable for your platform."]}),"\n",(0,a.jsx)(s.h4,{id:"windows",children:"Windows"}),"\n",(0,a.jsx)(s.p,{children:"Download the respective executable:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"https://static.rust-lang.org/rustup/dist/x86_64-pc-windows-msvc/rustup-init.exe",children:"RUSTUP-INIT.exe - 64bit"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"https://static.rust-lang.org/rustup/dist/i686-pc-windows-msvc/rustup-init.exe",children:"RUSTUP-INIT.exe - 32bit"})}),"\n"]}),"\n",(0,a.jsxs)(s.admonition,{type:"note",children:[(0,a.jsxs)(s.p,{children:["You may be prompted to install ",(0,a.jsx)(s.a,{href:"https://visualstudio.microsoft.com/visual-cpp-build-tools/",children:"Visual Studio C++ Build tools"}),". If so, follow the instructions from the previous link."]}),(0,a.jsxs)(s.p,{children:["Even if Visual Studio is already on your machine, ",(0,a.jsx)(s.code,{children:"rustup"})," will not verify if the required components are present. If you experience issues with the ",(0,a.jsx)(s.code,{children:"rustup"})," installation on Windows, please follow ",(0,a.jsx)(s.a,{href:"https://rust-lang.github.io/rustup/installation/windows-msvc.html#installing-only-the-required-components-optional",children:"these instructions"})," to manually add the missing components."]})]}),"\n",(0,a.jsxs)(s.p,{children:["The last step is to run ",(0,a.jsx)(s.code,{children:"rustup --version"})," in terminal. If everything went well, you should see an output similar to this:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"rustup 1.28.1 (f9edccde0 2025-03-05)\ninfo: This is the version for the rustup toolchain manager, not the rustc compiler.\ninfo: The currently active `rustc` version is `rustc 1.85.0 (4d91de4e4 2025-02-17)`\n"})}),"\n",(0,a.jsx)(s.h3,{id:"probe-rs",children:(0,a.jsx)(s.code,{children:"probe-rs"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.code,{children:"probe-rs"})," is an embedded debugging and target interaction toolkit. It enables its user to program and debug microcontrollers via a debug probe. To install it, please follow the ",(0,a.jsx)(s.a,{href:"https://probe.rs/docs/getting-started/installation/",children:"official installation tutorial"}),"."]}),"\n",(0,a.jsxs)(s.p,{children:["If you are on ",(0,a.jsx)(s.strong,{children:"Linux"})," you will also need to add this ",(0,a.jsx)(s.a,{href:"https://probe.rs/files/69-probe-rs.rules",children:(0,a.jsx)(s.code,{children:"udev"})})," file in ",(0,a.jsx)(s.code,{children:"/etc/udev/rules.d"}),". Then, run:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"udevadm control --reload # to ensure the new rules are used.\n\nudevadm trigger # to ensure the new rules are applied to already added devices.\n"})}),"\n",(0,a.jsx)(s.h2,{id:"hardware-support-overview",children:"Hardware support overview"}),"\n",(0,a.jsx)(s.p,{children:"This is a top view of the board we will use for this workshop:"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Lab Board",src:n(3019).A+"",width:"2776",height:"2144"})}),"\n",(0,a.jsx)(s.h3,{id:"stm32-nucleo-u545re-q",children:"STM32 Nucleo-U545RE-Q"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.em,{children:'"brains"'})," of the board is represented by the ",(0,a.jsx)(s.strong,{children:"STM32 Nucleo-U545RE-Q"}),", a compact microcontroller with based on ",(0,a.jsx)(s.strong,{children:"Arm Cortex-M33"}),", running at up to ",(0,a.jsx)(s.strong,{children:"160 MHz"}),". It features ",(0,a.jsx)(s.strong,{children:"272 KB SRAM"}),", ",(0,a.jsx)(s.strong,{children:"512 KB flash storage"}),". It includes ",(0,a.jsx)(s.strong,{children:"51 GPIO pins"}),", ",(0,a.jsx)(s.strong,{children:"4 I\xb2C buses"}),", ",(0,a.jsx)(s.strong,{children:"3 SPI channels"}),", ",(0,a.jsx)(s.strong,{children:"2 UARTs"}),", ",(0,a.jsx)(s.strong,{children:"USB 2.0 FS"}),", and ",(0,a.jsx)(s.strong,{children:"CAN (FDCAN)"}),", on the analog side, it integrates a ",(0,a.jsx)(s.strong,{children:"12\u2011bit ADC"}),", a ",(0,a.jsx)(s.strong,{children:"14\u2011bit ADC"}),", and dual ",(0,a.jsx)(s.strong,{children:"12\u2011bit DACs"}),", complemented by advanced math and signal\u2011processing functions and security enhancements include ",(0,a.jsx)(s.strong,{children:"Arm TrustZone"})," and ",(0,a.jsx)(s.strong,{children:"OTP memory"}),". This makes it ideal for IoT and embedded applications."]}),"\n",(0,a.jsx)(s.h2,{id:"documentation",children:"Documentation"}),"\n",(0,a.jsx)(s.h3,{id:"gpio",children:"GPIO"}),"\n",(0,a.jsx)(s.h4,{id:"what-is-gpio",children:"What is GPIO?"}),"\n",(0,a.jsx)(s.p,{children:"General-Purpose Input/Output, or GPIO, is an essential part of embedded systems that serves as a vital conduit between microcontrollers and microprocessors and the outside world. A microcontroller or microprocessor's group of pins that can each be set to operate as an input or an output is referred to as GPIO. The purpose of these pins is to interface external components, including actuators, displays, sensors, and other devices, so that the embedded system may communicate with its surroundings. Standardized communication protocols like SPI, I2C, PCM, PWM, and serial communication may be directly supported by some GPIO pins. There are two varieties of GPIO pins: digital and analog."}),"\n",(0,a.jsx)(s.h4,{id:"configuring-gpio-pins",children:"Configuring GPIO Pins"}),"\n",(0,a.jsx)(s.p,{children:"GPIO pins can be used as outputs (LEDs, motors, buzzers) or as inputs (buttons, sensors)."}),"\n",(0,a.jsx)(s.p,{children:"The STM32U545 controls the GPIO pins through several GPIO Ports (PortA, PortB, PortC, PortD, PortE, etc.). Using GPIOs implies configuring the:"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.em,{children:"MODER"})," - connects the outer GPIO pin to one of the:","\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["internal ",(0,a.jsx)(s.code,{children:"GPIO"})," peripheral as ",(0,a.jsx)(s.code,{children:"input"})]}),"\n",(0,a.jsxs)(s.li,{children:["internal ",(0,a.jsx)(s.code,{children:"GPIO"})," peripheral as ",(0,a.jsx)(s.code,{children:"output"})]}),"\n",(0,a.jsxs)(s.li,{children:["one of the alternate function peripheral (further selected by the ",(0,a.jsx)(s.em,{children:"Alternate Function Multiplexer"}),")"]}),"\n",(0,a.jsxs)(s.li,{children:["the ",(0,a.jsx)(s.code,{children:"ADC"})," peripheral"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.em,{children:"Electrical Configuration"})," - manages the physical pin on the outside of the chip. It decides the electrical behavior of the pad, such as whether it has a pull\u2011up or pull\u2011down resistor, whether it drives strongly or weakly, and whether it is push\u2011pull or open\u2011drain."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.em,{children:"Alternate Function Multiplexer"})," - connects the internal peripherals to the outside pins. Each pin can be switched to different functions. For example, a single pin can be used as:","\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["a ",(0,a.jsx)(s.code,{children:"UART"})," transmit line"]}),"\n",(0,a.jsxs)(s.li,{children:["an ",(0,a.jsx)(s.code,{children:"I2C"})," data line"]}),"\n",(0,a.jsxs)(s.li,{children:["an ",(0,a.jsx)(s.code,{children:"SPI"})," clock or data line"]}),"\n",(0,a.jsxs)(s.li,{children:["a ",(0,a.jsx)(s.code,{children:"TIM"})," timer channel"]}),"\n",(0,a.jsxs)(s.li,{children:["a ",(0,a.jsx)(s.code,{children:"PWM"})," timer channel"]}),"\n",(0,a.jsx)(s.li,{children:"..."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.em,{children:"GPIO Input/Output"})," - this is the simple digital interface that developers use when they want to read or write a pin directly in software. It\u2019s what you use to toggle an LED or read a button."]}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"STM32 Nucleo-U545RE-Q Pinout",src:n(2193).A+"",width:"1600",height:"1250"})}),"\n",(0,a.jsxs)(s.admonition,{type:"note",children:[(0,a.jsx)(s.p,{children:"When you look at an STM32 Nucleo-U545RE-Q development board, you'll notice two sets of male pin headers. These are designed to give you two different ways to access the microcontroller's (MCU) pins."}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"ST Morpho Headers"}),": These are the two long, outer rows of pins (e.g., CN7 and CN10). They are a superset designed to expose all the I/O pins of the STM32 microcontroller for complete access and flexibility."]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Arduino Headers"}),": These are the four inner headers (e.g., CN5, CN6, CN8, CN9). They are a subset of the ST morpho pins. Their layout is standardized to match the Arduino Uno R3, allowing you to easily connect and use existing Arduino shields."]}),"\n"]}),"\n"]}),(0,a.jsx)(s.p,{children:"In short, every Arduino pin is also available on the ST morpho headers, but the morpho headers provide access to many more pins that are not part of the Arduino layout."})]}),"\n",(0,a.jsx)(s.h3,{id:"timing",children:"Timing"}),"\n",(0,a.jsx)(s.p,{children:"In embedded applications, keeping track of time is crucial. Even for the simple task of blinking an LED at a certain time interval, we need a reference of time that is constant and precise."}),"\n",(0,a.jsx)(s.h4,{id:"clocks",children:"Clocks"}),"\n",(0,a.jsx)(s.p,{children:"A clock is a piece of hardware that provides us with that reference. Its purpose is to oscillate at a fixed frequency and provide a signal that switches from high to low at a fixed interval."}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"ClockSignal",src:n(6690).A+"",width:"785",height:"228"})}),"\n",(0,a.jsx)(s.p,{children:"The most precise type of clock on the STM32 Nucleo-U545RE-Q is the High-Speed External oscillator (HSE). The reason why it is so accurate is because it uses the crystal\u2019s natural vibration frequency to generate the clock signal. This oscillator is usually external to the microcontroller itself, requiring a crystal or external clock source connected to the HSE pins."}),"\n",(0,a.jsx)(s.p,{children:"The processor also provides several internal RC oscillators (HSI, MSI, LSI), which are less accurate because they rely on resistor-capacitor timing rather than quartz resonance. These internal clocks are useful when small variations in clock pulses are acceptable, or when minimizing external components is important."}),"\n",(0,a.jsx)(s.p,{children:"The STM32 Nucleo-U545RE-Q does not have a built-in crystal frequency. Instead, the board designer selects an appropriate crystal (commonly 8\u202fMHz, 16\u202fMHz, or 24\u202fMHz) to drive the HSE, depending on the application requirements."}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"HSE",src:n(3151).A+"",width:"790",height:"697"})}),"\n",(0,a.jsx)(s.h4,{id:"counters",children:"Counters"}),"\n",(0,a.jsx)(s.p,{children:'A counter in electronics is a tool that tracks numbers, typically by adding or subtracting one each time the clock ticks. When it reaches its maximum (or minimum) value, it resets or wraps around. This reset is called an "overflow" (when counting up) or "underflow" (when counting down). Some counters can also switch between counting up and down based on control signals.'}),"\n",(0,a.jsx)(s.admonition,{type:"info",children:(0,a.jsx)(s.p,{children:"A regular counter on 8 bits would count up from 0 to 255, then loop back to 0 and continue counting."})}),"\n",(0,a.jsx)(s.p,{children:"In theory a counter is associated with 3 registers:"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Register"}),(0,a.jsx)(s.th,{children:"Description"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"value"})}),(0,a.jsx)(s.td,{children:"the current value of the counter"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"direction"})}),(0,a.jsx)(s.td,{children:"whether the counter is counting UP or DOWN"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"reset"})}),(0,a.jsx)(s.td,{children:"if the direction is UP, the value at which the counter resets to 0; if the direction is DOWN, the value at which the counter reset after reaching 0"})]})]})]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Counter",src:n(4552).A+"",width:"381",height:"294"})}),"\n",(0,a.jsx)(s.p,{children:"The way the counter works here is that it increments/decrements every clock cycle and checks whether or not it has reached its reset value. If is has, then it resets to its initial value and starts all over again."}),"\n",(0,a.jsx)(s.h4,{id:"systick",children:"SysTick"}),"\n",(0,a.jsx)(s.p,{children:"The ARM Cortex-M33 used by STM32U545 both use the SysTick time counter to keep track of time. This counter is decremented every microsecond, and when it reaches 0, it triggers an exception and then resets."}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"SYST_CVR"})," register - the value of the timer itself"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"SYST_RVR"})," register - the reset value"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"SYST_CSR_SET"})," register:","\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"ENABLE"})," field - enable/disable the counter"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"TICKINT"})," field - enable/disable exception on reaching 0"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(s.h4,{id:"timers",children:"Timers"}),"\n",(0,a.jsxs)(s.p,{children:["The simplest way to make a processor wait is to ask the processor to skip a clock cycle a number of times, or by calling the processor instruction ",(0,a.jsx)(s.code,{children:"nop"})," (no operation) in a loop."]}),"\n",(0,a.jsx)(s.admonition,{type:"info",children:(0,a.jsxs)(s.p,{children:["This method is not ideal, since the ",(0,a.jsx)(s.code,{children:"nop"})," instruction stalls the processor and wastes valuable time that could otherwise be used to do other things in the meantime. To optimize this, we can use ",(0,a.jsx)(s.em,{children:"alarms"}),"."]})}),"\n",(0,a.jsxs)(s.p,{children:["An ",(0,a.jsx)(s.strong,{children:"alarm"})," is a counter that triggers an interrupt every time it reaches a certain value. This way, an alarm can be set to trigger after a specific interval of time, and while the ",(0,a.jsx)(s.strong,{children:"alarm"})," hardware is ",(0,a.jsx)(s.em,{children:"running in the background"}),", the main program can continue executing instructions, and so it is not blocked. When the alarm reaches the chosen value, it goes off and triggers an interrupt that can then be handled in its specific Interrupt Service Routine (ISR)."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Alarm",src:n(3107).A+"",width:"558",height:"469"})}),"\n",(0,a.jsxs)(s.admonition,{type:"info",children:[(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.strong,{children:"RP2350"})," timer and the ",(0,a.jsx)(s.strong,{children:"RP2040's"})," are fully monotonic, meaning they can never truly overflow. Their value is stored on 64 bits and incremented every 1 microsecond, ensuring precise and consistent timekeeping. This means the last value they can increment to before overflowing is 2",(0,a.jsx)("sup",{children:"64"}),"\u20111, which is equivalent to roughly 500,000 years. RP2040 and RP2350 support 4 different alarms (TIMERx_IRQ_0/1/2/3), which can be used independently, allowing for multiple timed events or tasks to be managed simultaneously."]}),(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.strong,{children:"RP2350"})," provides two timer peripherals, while the ",(0,a.jsx)(s.strong,{children:"RP2040"})," provides only one."]}),(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.strong,{children:"STM32U5"}),", by contrast, does not use a single 64\u2011bit monotonic timer. Instead, it provides a set of general\u2011purpose 16\u2011bit and 32\u2011bit timers (TIMx) as well as advanced timers for motor control and low\u2011power timers for energy\u2011sensitive applications. These timers can be configured with prescalers and auto\u2011reload registers to generate periodic interrupts, PWM signals, input capture, or output compare events. Unlike the RP2040 and RP2350\u2019s unified 64\u2011bit microsecond counter, STM32 timers can overflow depending on their bit\u2011width (e.g., a 16\u2011bit timer rolls over after 65,535 counts). To achieve long\u2011duration or monotonic timekeeping, software typically chains timers or uses the SysTick timer in combination with interrupts."]})]}),"\n",(0,a.jsx)(s.h3,{id:"analog-and-digital-signals",children:"Analog and Digital Signals"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Analog signals"})," are a representation of real-world data. They communicate information in a continuous function of time. They are smooth and time-varying waves, and contain an infinite number of values within the continuous range. An example of an analog signal would be sound, or the human voice."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"AnalogSignal",src:n(6272).A+"",width:"1085",height:"372"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Digital signals"})," are a discrete representation of data. They are represented by a sequence of binary values, taken from a finite set of possible numbers. They are square and discrete waves. In most cases, they are represented by two values: 0 and 1 (or 0V and 5V). Digital representation of signals is usually used in hardware."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"DigitalSignal",src:n(3952).A+"",width:"1067",height:"396"})}),"\n",(0,a.jsx)(s.h3,{id:"pulse-width-modulation-pwm",children:"Pulse-Width Modulation (PWM)"}),"\n",(0,a.jsxs)(s.p,{children:["Up to now, we learned to turn an LED on and off, or in other words, set a LED's intensity to 100% or 0%. What if we wanted to turn on the LED only at 50% intensity? We only have a two-level digital value, 0 or 1, so technically a value of 0.5 is not possible. What we can do is simulate this analog signal, so that it ",(0,a.jsx)(s.em,{children:"looks"})," like the LED is at half intensity."]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Pulse-Width Modulation"})," is a method of simulating an analog signal using a digital one, by varying the width of the generated square wave."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"PWMExample",src:n(7102).A+"",width:"731",height:"219"})}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsx)(s.p,{children:"We can think of the simulated analog signal being directly proportional to the change in digital signal pulse size. The larger the square wave at a given period T, the higher the average analog amplitude output for that period."})}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.strong,{children:"duty cycle"})," of the signal is the percentage of time per period that the signal is high."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"DutyCycle",src:n(140).A+"",width:"494",height:"259"})}),"\n",(0,a.jsx)(s.p,{children:"So if we wanted our led to be at 50% intensity, we would choose a duty cycle of 50%. By quickly switching between high and low, the led appears to the human eye as being at only 50% intensity, when in reality, it's only on at max intensity 50% of the time, and off the rest of the time."}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"PWMLed",src:n(6394).A+"",width:"440",height:"200"})}),"\n",(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"d"}),(0,a.jsx)(s.mi,{children:"u"}),(0,a.jsx)(s.mi,{children:"t"}),(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,a.jsx)(s.mi,{children:"c"}),(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsx)(s.mi,{children:"c"}),(0,a.jsx)(s.mi,{children:"l"}),(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsxs)(s.mfrac,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"t"}),(0,a.jsx)(s.mi,{children:"i"}),(0,a.jsx)(s.mi,{children:"m"}),(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,a.jsx)(s.mi,{children:"o"}),(0,a.jsx)(s.mi,{children:"n"})]}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"p"}),(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsx)(s.mi,{children:"r"}),(0,a.jsx)(s.mi,{children:"i"}),(0,a.jsx)(s.mi,{children:"o"}),(0,a.jsx)(s.mi,{children:"d"})]})]}),(0,a.jsx)(s.mi,{mathvariant:"normal",children:"%"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\nduty\\_cycle = \\frac{time\\_on}{period} \\%\n"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1.0044em",verticalAlign:"-0.31em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(s.span,{className:"mord",style:{marginRight:"0.02778em"},children:"_"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"cyc"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"2.24em",verticalAlign:"-0.8804em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(s.span,{className:"mfrac",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"1.3595em"},children:[(0,a.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"er"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"o"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"d"})]})]}),(0,a.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(s.span,{style:{top:"-3.7em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"im"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(s.span,{className:"mord",style:{marginRight:"0.02778em"},children:"_"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"o"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"n"})]})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.8804em"},children:(0,a.jsx)(s.span,{})})})]})}),(0,a.jsx)(s.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(s.span,{className:"mord",children:"%"})]})]})]})}),"\n",(0,a.jsxs)(s.p,{children:["On the STM32U545, PWM generation is handled by the timer peripherals (",(0,a.jsx)(s.code,{children:"TIMx"}),"), where each channel uses a counter (",(0,a.jsx)(s.code,{children:"TIMx_CNT"}),"), a compare register (",(0,a.jsx)(s.code,{children:"TIMx_CCRy"}),"), and an auto\u2011reload register (",(0,a.jsx)(s.code,{children:"TIMx_ARR"}),") to define the duty cycle and period."]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"TIMx_CNT"})," - the actual value of the counter"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"TIMx_CCRy"})," - the compare value for channel y (this sets the duty cycle)"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"TIMx_ARR"})," - the auto\u2011reload value, the maximum count before the counter resets (this sets the period)"]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["When ",(0,a.jsx)(s.code,{children:"TIMx_CNT"})," is reset (0), the output signal is set to 1 (active). The counter counts up until it reaches ",(0,a.jsx)(s.code,{children:"TIMx_CCRy"}),", after which the output signal becomes 0 (inactive). The counter continues to count until it reaches ",(0,a.jsx)(s.code,{children:"TIMx_ARR"}),", then it resets to 0 and the signal becomes 1 again."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"PWMRP2040",src:n(9687).A+"",width:"1502",height:"960"})}),"\n",(0,a.jsx)(s.p,{children:"On STM32U545, PWM signals are generated by the timer peripherals (TIMx). Each timer provides multiple channels, and each channel can be mapped to specific GPIO pins through the alternate function system."}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Arduino connector"}),(0,a.jsx)(s.th,{children:"STM32 pin"}),(0,a.jsx)(s.th,{children:"PWMs"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"D3"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PB3"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"TIM2_CH2"})," (Timer 2 PWM Channel 2)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"D5"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PB4"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"TIM3_CH1"})," (Timer 3 PWM Channel 1)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"D6"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PB10"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"TIM2_CH3"})," (Timer 2 PWM Channel 3)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"D9"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PC6"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"TIM3_CH1"})," (Timer 3 PWM Channel 1)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"D10"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PC9"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"TIM3_CH4"})," (Timer 3 PWM Channel 4)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"D11"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PA7"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"TIM3_CH2"}),"(Timer 3 PWM Channel 2)"]})]})]})]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"RP2040PWMPins",src:n(2154).A+"",width:"1404",height:"500"})}),"\n",(0,a.jsx)(s.admonition,{type:"info",children:(0,a.jsxs)(s.p,{children:["You can find more details about the pins in the ",(0,a.jsx)(s.a,{href:"https://www.st.com/resource/en/user_manual/um3062-stm32u3u5-nucleo64-boards-mb1841-stmicroelectronics.pdf",children:"user manual"})," of the board(page 33)"]})}),"\n",(0,a.jsx)(s.h4,{id:"examples-of-hardware-controlled-through-pwm",children:"Examples of hardware controlled through PWM"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"leds"}),"\n",(0,a.jsx)(s.li,{children:"motors"}),"\n",(0,a.jsx)(s.li,{children:"buzzers"}),"\n",(0,a.jsx)(s.li,{children:"RGB leds (what we will be using for this lab)"}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["An ",(0,a.jsx)(s.strong,{children:"RGB"})," LED is a led that can emit any color, using a combination of red, green and blue light. On the inside, it's actually made up of 3 separate leds:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.em,{children:"R"})," led - to control the intensity of the ",(0,a.jsx)(s.em,{children:"red"})," light"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.em,{children:"G"})," led - to control the intensity of the ",(0,a.jsx)(s.em,{children:"green"})," light"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.em,{children:"B"})," led - to control the intensity of the ",(0,a.jsx)(s.em,{children:"blue"})," light"]}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"By using PWM on the R, G and B leds, we can control each of their intensity to represent any color."}),"\n",(0,a.jsx)(s.admonition,{type:"info",children:(0,a.jsx)(s.p,{children:"For example, if we wanted to create the color purple, we would set the intensity of red and blue to 100%, and the intensity of green to 0%."})}),"\n",(0,a.jsx)(s.p,{children:"There are two different types of RGB LEDs:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"common cathode: all LED cathodes are connected together. A LOW signal means off, and a HIGH signal means on at max intensity."}),"\n",(0,a.jsx)(s.li,{children:"common anode: all LED anodes are connected together. A LOW signal means on at max intensity, and a HIGH signal means off."}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"CommonAnodeCommonCathode",src:n(9045).A+"",width:"1000",height:"569"})}),"\n",(0,a.jsx)(s.admonition,{type:"warning",children:(0,a.jsxs)(s.p,{children:["For this lab, we will be using ",(0,a.jsx)(s.strong,{children:"common anode"})," RGB LEDs, which means that the PWM signal should be ",(0,a.jsx)(s.em,{children:"opposite"}),". 0 will be 100% intensity, and 1 will be 0% intensity."]})}),"\n",(0,a.jsx)(s.h4,{id:"how-to-wire-an-rgb-led",children:"How to wire an RGB LED"}),"\n",(0,a.jsxs)(s.p,{children:["The RGB LED that the board provides is signaled with labels ",(0,a.jsx)(s.code,{children:"RGB_BLUE"})," (blue), ",(0,a.jsx)(s.code,{children:"RGB_GREEN"})," (green) and ",(0,a.jsx)(s.code,{children:"RGB_RED"})," (red) in the connectors section."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"RGBWiring",src:n(3743).A+"",width:"1133",height:"493"})}),"\n",(0,a.jsx)(s.h4,{id:"how-to-wire-a-servo-motor",children:"How to wire a servo motor"}),"\n",(0,a.jsxs)(s.p,{children:["A ",(0,a.jsx)(s.strong,{children:"servo motor"})," is a motor that can be controlled with PWM. It has an arm that can be rotated to a specific angle, depending on the PWM signal it receives."]}),"\n",(0,a.jsx)(s.p,{children:"A servo motor has three wires:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Power"})," - usually red, connected to a voltage source (5V)"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Ground"})," - usually black, connected to the ground"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Signal"})," - usually orange, connected to a PWM pin\n",(0,a.jsx)(s.img,{alt:"ServoMotorWiring",src:n(9983).A+"",width:"638",height:"493"})]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["The board provides the connectors for the servo motor. These connectors are labeled ",(0,a.jsx)(s.code,{children:"GND"}),", ",(0,a.jsx)(s.code,{children:"PWR"}),", and ",(0,a.jsx)(s.code,{children:"SIG"})," in the connectors section."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"ServoMotor",src:n(8217).A+"",width:"1019",height:"617"})}),"\n",(0,a.jsxs)(s.p,{children:["To wire the servo motor to the STM32 Nucleo-U545RE-Q, note that the servo\u2019s ",(0,a.jsx)(s.code,{children:"PWR"}),", ",(0,a.jsx)(s.code,{children:"GND"}),", and ",(0,a.jsx)(s.code,{children:"SIG"})," lines are already connected to the lab board. The only additional step is to place a jumper wire from the SIG connector of the the lab board to a suitable PWM-capable pin on the STM32 Nucleo-U545RE-Q."]}),"\n",(0,a.jsx)(s.h4,{id:"pwm-in-embassy-rs",children:"PWM in Embassy-rs"}),"\n",(0,a.jsx)(s.p,{children:"First, we need a reference to all peripherals, as usual."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"// Initialize peripherals\nlet peripherals = embassy_stm32::init(Default::default());\n"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"use embassy_stm32::timer::simple_pwm::{PwmPin, SimplePwm};\nuse embassy_stm32::peripherals::TIM2;\nuse embassy_stm32::timer::Ch1;\n\n    // Configure PA0 as TIM2_CH1 PWM output\n    let led_pwm_pin: PwmPin<'_, TIM2, Ch1> = PwmPin::new(p.PA0, OutputType::PushPull);\n"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"PA0"})," \u2192 the physical GPIO pin you want to use."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"TIM2"})," \u2192 the timer peripheral that will generate the PWM signal."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"Ch1"})," \u2192 the channel of that timer (channel 1)."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"PwmPin::new_ch1"})," \u2192 ties PA0 to TIM2 channel 1\u2019s output."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"OutputType::PushPull"})," \u2192 configures the electrical drive mode of the pin."]}),"\n"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"let mut pwm = SimplePwm::new(\n    p.TIM2,              // Timer 2 peripheral\n    Some(led_pwm_pin),   // Channel 1 output (PA0)\n    None,                // Channel 2 not used\n    None,                // Channel 3 not used\n    None,                // Channel 4 not used\n    khz(1),              // PWM frequency = 1 kHz\n    Default::default(),  // Default configuration\n);\n"})}),"\n",(0,a.jsx)(s.admonition,{type:"warning",children:(0,a.jsx)(s.p,{children:"The code above is an example for PA0 with TIM2_CH1. You need to modify the timer, channel, and pin depending on which PWM\u2011capable pin you want to use!"})}),"\n",(0,a.jsx)(s.p,{children:"If we decide to modify the duty cycle of the PWM, we can update it directly on the channel:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"let mut ch1 = pwm.ch1(); // Get handle for channel 1\nch1.enable();\n\n// Set duty cycle to 50%\nch1.set_duty_cycle_percent(50);\n\n// Later, change duty cycle to 10%\nch1.set_duty_cycle_percent(10);\n"})}),"\n",(0,a.jsx)(s.h4,{id:"controlling-a-servo-motor-using-pwm",children:"Controlling a Servo Motor Using PWM"}),"\n",(0,a.jsx)(s.p,{children:"Just like controlling other hardware through PWM, we start by initializing the peripherals."}),"\n",(0,a.jsx)(s.p,{children:"Servos typically expect a 50 Hz PWM signal, which corresponds to a 20 ms period."}),"\n",(0,a.jsx)(s.p,{children:"Servos interpret PWM signals based on the pulse width rather than just frequency:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"Period"}),": The total time for one PWM cycle, which is 20 ms (50 Hz)."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"Minimum Pulse Width"}),": Typically ",(0,a.jsx)(s.strong,{children:"0.5 ms"}),", which corresponds to a servo position of ",(0,a.jsx)(s.strong,{children:"0 degrees"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"Maximum Pulse Width"}),": Typically ",(0,a.jsx)(s.strong,{children:"2.5 ms"}),", which corresponds to a servo position of ",(0,a.jsx)(s.strong,{children:"180 degrees"}),"."]}),"\n"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"// Initialize peripherals\nlet peripherals = embassy_stm32::init(Default::default());\n"})}),"\n",(0,a.jsx)(s.p,{children:"At 50\u202fHz, the PWM period is:"}),"\n",(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"T"}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsx)(s.mn,{children:"20"}),(0,a.jsx)(s.mi,{children:"m"}),(0,a.jsx)(s.mi,{children:"s"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\nT = 20ms \n"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(s.span,{className:"mord",children:"20"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"m"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"s"})]})]})]})}),"\n",(0,a.jsxs)(s.p,{children:["For a given pulse width ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"p"}),(0,a.jsx)(s.mi,{children:"u"}),(0,a.jsx)(s.mi,{children:"l"}),(0,a.jsx)(s.mi,{children:"s"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"w"}),(0,a.jsx)(s.mi,{children:"i"}),(0,a.jsx)(s.mi,{children:"d"}),(0,a.jsx)(s.mi,{children:"t"}),(0,a.jsx)(s.mi,{children:"h"})]})]})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"pulse_{width}"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"i"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"d"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})})]})," the duty cycle percentage is:"]}),"\n",(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"d"}),(0,a.jsx)(s.mi,{children:"u"}),(0,a.jsx)(s.mi,{children:"t"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"c"}),(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsx)(s.mi,{children:"c"}),(0,a.jsx)(s.mi,{children:"l"}),(0,a.jsx)(s.mi,{children:"e"})]})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mo,{fence:"true",children:"("}),(0,a.jsxs)(s.mfrac,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"p"}),(0,a.jsx)(s.mi,{children:"u"}),(0,a.jsx)(s.mi,{children:"l"}),(0,a.jsx)(s.mi,{children:"s"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"w"}),(0,a.jsx)(s.mi,{children:"i"}),(0,a.jsx)(s.mi,{children:"d"}),(0,a.jsx)(s.mi,{children:"t"}),(0,a.jsx)(s.mi,{children:"h"})]})]}),(0,a.jsx)(s.mo,{children:"\xd7"}),(0,a.jsx)(s.mn,{children:"100"})]}),(0,a.jsx)(s.mi,{children:"T"})]}),(0,a.jsx)(s.mo,{fence:"true",children:")"})]})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\nduty_{cycle} = \\left( \\frac{pulse_{width} \\times 100}{T} \\right)\n"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.9805em",verticalAlign:"-0.2861em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"cyc"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"2.4em",verticalAlign:"-0.95em"}}),(0,a.jsxs)(s.span,{className:"minner",children:[(0,a.jsx)(s.span,{className:"mopen delimcenter",style:{top:"0em"},children:(0,a.jsx)(s.span,{className:"delimsizing size3",children:"("})}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(s.span,{className:"mfrac",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"1.3714em"},children:[(0,a.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"})})]}),(0,a.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(s.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"i"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"d"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mord",children:"100"})]})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.686em"},children:(0,a.jsx)(s.span,{})})})]})}),(0,a.jsx)(s.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(s.span,{className:"mclose delimcenter",style:{top:"0em"},children:(0,a.jsx)(s.span,{className:"delimsizing size3",children:")"})})]})]})]})]})}),"\n",(0,a.jsxs)(s.p,{children:["The function ",(0,a.jsx)(s.code,{children:"set_duty_cycle_fraction(num, den)"})," expects a fraction representing the duty cycle."]}),"\n",(0,a.jsxs)(s.p,{children:["For example, to generate a ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"p"}),(0,a.jsx)(s.mi,{children:"u"}),(0,a.jsx)(s.mi,{children:"l"}),(0,a.jsx)(s.mi,{children:"s"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"w"}),(0,a.jsx)(s.mi,{children:"i"}),(0,a.jsx)(s.mi,{children:"d"}),(0,a.jsx)(s.mi,{children:"t"}),(0,a.jsx)(s.mi,{children:"h"})]})]})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"pulse_{width}"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"i"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"d"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})})]})," of 2.5ms,"]}),"\n",(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"d"}),(0,a.jsx)(s.mi,{children:"u"}),(0,a.jsx)(s.mi,{children:"t"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"c"}),(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsx)(s.mi,{children:"c"}),(0,a.jsx)(s.mi,{children:"l"}),(0,a.jsx)(s.mi,{children:"e"})]})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mo,{fence:"true",children:"("}),(0,a.jsxs)(s.mfrac,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mn,{children:"2.5"}),(0,a.jsx)(s.mo,{children:"\xd7"}),(0,a.jsx)(s.mn,{children:"1000"})]}),(0,a.jsx)(s.mn,{children:"20"})]}),(0,a.jsx)(s.mo,{fence:"true",children:")"})]}),(0,a.jsx)(s.mtext,{children:"\u2030"}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsx)(s.mn,{children:"125"}),(0,a.jsx)(s.mtext,{children:"\u2030"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\nduty_{cycle} = \\left( \\frac{2.5 \\times 1000}{20} \\right) \u2030 = 125 \u2030\n"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.9805em",verticalAlign:"-0.2861em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"cyc"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"2.4em",verticalAlign:"-0.95em"}}),(0,a.jsxs)(s.span,{className:"minner",children:[(0,a.jsx)(s.span,{className:"mopen delimcenter",style:{top:"0em"},children:(0,a.jsx)(s.span,{className:"delimsizing size3",children:"("})}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(s.span,{className:"mfrac",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"1.3214em"},children:[(0,a.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsx)(s.span,{className:"mord",children:"20"})})]}),(0,a.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(s.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord",children:"2.5"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mord",children:"1000"})]})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.686em"},children:(0,a.jsx)(s.span,{})})})]})}),(0,a.jsx)(s.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(s.span,{className:"mclose delimcenter",style:{top:"0em"},children:(0,a.jsx)(s.span,{className:"delimsizing size3",children:")"})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord",children:"\u2030"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(s.span,{className:"mord",children:"125\u2030"})]})]})]})}),"\n",(0,a.jsxs)(s.p,{children:["That means ",(0,a.jsx)(s.code,{children:"set_duty_cycle_fraction(125, 1000)"})]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["For ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"p"}),(0,a.jsx)(s.mi,{children:"u"}),(0,a.jsx)(s.mi,{children:"l"}),(0,a.jsx)(s.mi,{children:"s"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"w"}),(0,a.jsx)(s.mi,{children:"i"}),(0,a.jsx)(s.mi,{children:"d"}),(0,a.jsx)(s.mi,{children:"t"}),(0,a.jsx)(s.mi,{children:"h"})]})]})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"pulse_{width}"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"i"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"d"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})})]})," = 0.5ms:"]}),"\n"]}),"\n",(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"d"}),(0,a.jsx)(s.mi,{children:"u"}),(0,a.jsx)(s.mi,{children:"t"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"c"}),(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsx)(s.mi,{children:"c"}),(0,a.jsx)(s.mi,{children:"l"}),(0,a.jsx)(s.mi,{children:"e"})]})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mo,{fence:"true",children:"("}),(0,a.jsxs)(s.mfrac,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mn,{children:"0.5"}),(0,a.jsx)(s.mo,{children:"\xd7"}),(0,a.jsx)(s.mn,{children:"1000"})]}),(0,a.jsx)(s.mn,{children:"20"})]}),(0,a.jsx)(s.mo,{fence:"true",children:")"})]}),(0,a.jsx)(s.mtext,{children:"\u2030"}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsx)(s.mn,{children:"25"}),(0,a.jsx)(s.mtext,{children:"\u2030"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\nduty_{cycle} = \\left( \\frac{0.5 \\times 1000}{20} \\right) \u2030 = 25 \u2030\n"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.9805em",verticalAlign:"-0.2861em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"cyc"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"2.4em",verticalAlign:"-0.95em"}}),(0,a.jsxs)(s.span,{className:"minner",children:[(0,a.jsx)(s.span,{className:"mopen delimcenter",style:{top:"0em"},children:(0,a.jsx)(s.span,{className:"delimsizing size3",children:"("})}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(s.span,{className:"mfrac",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"1.3214em"},children:[(0,a.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsx)(s.span,{className:"mord",children:"20"})})]}),(0,a.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(s.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord",children:"0.5"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mord",children:"1000"})]})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.686em"},children:(0,a.jsx)(s.span,{})})})]})}),(0,a.jsx)(s.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(s.span,{className:"mclose delimcenter",style:{top:"0em"},children:(0,a.jsx)(s.span,{className:"delimsizing size3",children:")"})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord",children:"\u2030"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(s.span,{className:"mord",children:"25\u2030"})]})]})]})}),"\n",(0,a.jsxs)(s.p,{children:["That means ",(0,a.jsx)(s.code,{children:"set_duty_cycle_fraction(25, 1000)"})]}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsx)(s.p,{children:"We use \u2030 for accuracy, as the PWM works with integer numbers and % is not accurate enough."})}),"\n",(0,a.jsx)(s.p,{children:"Now, let's implement it in Rust:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"// Set the PWM pin\nlet servo_pin = PwmPin::new_ch1(p.PA0, OutputType::PushPull);\n\n// 50 Hz PWM (20 ms period)\nlet mut pwm = SimplePwm::new(\n    p.TIM2,\n    Some(servo_pin),\n    None,\n    None,\n    None,\n    hz(50),\n    Default::default(),\n);\n\n// Enable the PWM channel\n    let mut ch1 = pwm.ch1();\n    ch1.enable();\n\nconst MIN_PERIOD_US: u32 = 500;\nconst MAX_PERIOD_US: u32 = 2500;\nconst PERIOD_US: u32 = 20000;\n\nlet min_value = (MIN_PERIOD_US * 1000) / PERIOD_US;\nlet max_value = (MAX_PERIOD_US * 1000) / PERIOD_US;\n\n    // Main loop to move the servo back and forth\n    loop {\n        // At 50 Hz, T = 20 ms. A 2.5 ms pulse means 2.5/20 = 12.5% duty cycle.\n        set_duty_cycle_fraction(max_value as u16, 1000); // sets the servo to set servo to ~180\xb0.\n        // Wait 1 second before moving back\n        // A 0.5 ms pulse means 0.5/20 = 2.5% duty cycle.\n        set_duty_cycle_fraction(min_value as u16, 1000); // sets the servo to set servo to ~0\xb0.\n        // Wait 1 second before repeating\n    }\n"})}),"\n",(0,a.jsx)(s.h3,{id:"analog-to-digital-converter-adc",children:"Analog-to-Digital Converter (ADC)"}),"\n",(0,a.jsxs)(s.p,{children:["Now we know how to represent an analog signal using digital signals. There are plenty of cases in which we need to know how to transform an analog signal into a digital one, for example a temperature reading, or the voice of a person. This means that we need to correctly represent a continuous wave of infinite values to a discrete wave of a finite set of values.\nFor this, we need to sample the analog signal periodically, in other words to measure the analog signal at a fixed interval of time. This is done by using an ",(0,a.jsx)(s.strong,{children:"Analog-to-Digital converter"}),"."]}),"\n",(0,a.jsx)(s.p,{children:"The ADC has two important parameters that define the quality of the signal representation:"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Parameter"}),(0,a.jsx)(s.th,{children:"Description"}),(0,a.jsx)(s.th,{children:"Impact on quality"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Sampling Rate"}),(0,a.jsx)(s.td,{children:"Frequency at which a new sample is read"}),(0,a.jsx)(s.td,{children:"The higher the sampling rate, the more samples we get, so the more accurate the representation of the signal"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Resolution"}),(0,a.jsx)(s.td,{children:"Number of bits which we can use in order to store the value of the sample"}),(0,a.jsx)(s.td,{children:"The higher the resolution, the more values we can store, so the more accurate the representation"})]})]})]}),"\n",(0,a.jsx)(s.admonition,{type:"info",children:(0,a.jsx)(s.p,{children:"For example, a resolution of 8 bits means that we can approximate the analog signal to a value from 0 to 255, where 0 means 0 volts and 255 represents the ADC reference voltage (maximum voltage the ADC can measure)."})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"ADCSampling",src:n(2680).A+"",width:"587",height:"443"})}),"\n",(0,a.jsx)(s.h4,{id:"nyquist-shannon-sampling-theorem",children:"Nyquist-Shannon Sampling Theorem"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem",children:"Nyquist-Shannon sampling theorem"})," serves as a bridge between continuous-time signals and discrete-time signals. It establishes a link between the frequency range of a signal and the sample rate required to avoid a type of distortion called ",(0,a.jsx)(s.em,{children:"aliasing"}),". Aliasing occurs when a signal is not sampled fast enough to construct an accurate waveform representation."]}),"\n",(0,a.jsx)(s.p,{children:"For an analog signal to be represented without loss of information, the conversion needs to satisfy the following formula:"}),"\n",(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"s"}),(0,a.jsx)(s.mi,{children:"a"}),(0,a.jsx)(s.mi,{children:"m"}),(0,a.jsx)(s.mi,{children:"p"}),(0,a.jsx)(s.mi,{children:"l"}),(0,a.jsx)(s.mi,{children:"i"}),(0,a.jsx)(s.mi,{children:"n"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"g"}),(0,a.jsx)(s.mi,{children:"f"})]}),(0,a.jsx)(s.mo,{children:">"}),(0,a.jsx)(s.mn,{children:"2"}),(0,a.jsx)(s.mo,{children:"\xd7"}),(0,a.jsx)(s.mi,{children:"m"}),(0,a.jsx)(s.mi,{children:"a"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"x"}),(0,a.jsx)(s.mi,{children:"f"})]})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"sampling_f > 2 \\times max_{f}"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.9805em",verticalAlign:"-0.2861em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"am"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"pl"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"in"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:">"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(s.span,{className:"mord",children:"2"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.7167em",verticalAlign:"-0.2861em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"ma"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})]})]})}),"\n",(0,a.jsxs)(s.p,{children:["The analog signal needs to be sampled at a frequency greater than twice the ",(0,a.jsx)(s.em,{children:"maximum frequency"})," of the signal.\nIn other words, we must sample at least twice per cycle."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"NyquistTheorem",src:n(5357).A+"",width:"603",height:"504"})}),"\n",(0,a.jsx)(s.h4,{id:"examples-of-analog-sensors",children:"Examples of analog sensors"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"temperature sensor"}),"\n",(0,a.jsx)(s.li,{children:"potentiometer"}),"\n",(0,a.jsx)(s.li,{children:"photoresistor"}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["A ",(0,a.jsx)(s.strong,{children:"photoresistor"})," (or photocell) is a sensor that measures the intensity of light around it. Its internal resistance varies depending on the light hitting its surface; therefore, the more light there is, the lower the resistance will be."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Photoresistor",src:n(1946).A+"",width:"266",height:"269"})}),"\n",(0,a.jsx)(s.h4,{id:"how-to-wire-a-photoresistor",children:"How to wire a photoresistor"}),"\n",(0,a.jsxs)(s.p,{children:["The photoresistor that the board provides is signaled with the label ",(0,a.jsx)(s.code,{children:"PHOTORESISTOR"})," in the connectors section."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"PhotoresistorWiring",src:n(5603).A+"",width:"816",height:"544"})}),"\n",(0,a.jsxs)(s.admonition,{type:"info",children:[(0,a.jsxs)(s.p,{children:["To wire a photoresistor on your board at home, you need to connect one leg to ",(0,a.jsx)(s.em,{children:"GND"})," and the other leg to a voltage divider."]}),(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"o"}),(0,a.jsx)(s.mi,{children:"u"}),(0,a.jsx)(s.mi,{children:"t"})]})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"i"}),(0,a.jsx)(s.mi,{children:"n"})]})]}),(0,a.jsx)(s.mo,{children:"\u2217"}),(0,a.jsxs)(s.mfrac,{children:[(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsx)(s.mn,{children:"2"})]}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsx)(s.mn,{children:"1"})]}),(0,a.jsx)(s.mo,{children:"+"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsx)(s.mn,{children:"2"})]})]})]}),(0,a.jsx)(s.mo,{separator:"true",children:";"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"V_{out} = V_{in} * \\frac{R_{2}}{R_{1} + R_{2}};"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.2222em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"o"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"u"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.2222em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"in"})})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\u2217"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"2.1963em",verticalAlign:"-0.836em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(s.span,{className:"mfrac",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"1.3603em"},children:[(0,a.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"1"})})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"+"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"2"})})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})]}),(0,a.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(s.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"2"})})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.836em"},children:(0,a.jsx)(s.span,{})})})]})}),(0,a.jsx)(s.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(s.span,{className:"mpunct",children:";"})]})]})]})}),(0,a.jsx)(s.p,{children:"In our case:"}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"o"}),(0,a.jsx)(s.mi,{children:"u"}),(0,a.jsx)(s.mi,{children:"t"})]})]})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"V_{out}"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.2222em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"o"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"u"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})})]})," will be the voltage at the ADC pin on the MCU"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"i"}),(0,a.jsx)(s.mi,{children:"n"})]})]})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"V_{in}"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.2222em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"in"})})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})})]})," will be the voltage at the GPIO pin the photoresistor is tied to"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsx)(s.mn,{children:"1"})]})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"R_{1}"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"1"})})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})})]})," is the variable resistance of the photoresistor"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsx)(s.mn,{children:"2"})]})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"R_{2}"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"2"})})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})})]})," is a resistance compatible with our photoresistor (in our case, 10k ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsx)(s.mi,{mathvariant:"normal",children:"\u03a9"})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\Omega"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord",children:"\u03a9"})]})})]}),")"]}),"\n"]}),(0,a.jsx)(s.p,{children:"This way, the ADC pin measures the photoresistor's resistance, without the risk of a short-circuit."}),(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"PhotoresistorWiring",src:n(4557).A+"",width:"431",height:"285"})})]}),"\n",(0,a.jsx)(s.h4,{id:"adc-in-embassy-rs",children:"ADC in Embassy-rs"}),"\n",(0,a.jsx)(s.p,{children:"On the STM32, the ADC peripheral does not use a FIFO interrupt like the RP2. Instead, each ADC (ADC1, ADC2, etc.) can be configured directly, and Embassy provides a driver that handles resolution, averaging, and sample time for you. All we need to do is create the ADC driver, configure it, and then bind it to the pin we want to read from."}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Arduino connector"}),(0,a.jsx)(s.th,{children:"STM32 pin"}),(0,a.jsx)(s.th,{children:"ADC"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"A0"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PA0"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"ADC1_IN5"}),"(ADC1 Channel 5)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"A1"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PA1"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"ADC1_IN6"})," (ADC1 Channel 6)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"A2"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PA4"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"ADC1_IN9"})," (ADC1 Channel 9)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"A3"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PB0"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"ADC1_IN15"})," (ADC1 Channel 15)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"A4"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PC1"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"ADC1_IN2"})," (ADC1 Channel 2)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"A5"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"PC0"})}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"ADC1_IN1"})," (ADC1 Channel 1)"]})]})]})]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"// ---- fn main() ----\n\nlet p = embassy_stm32::init(Default::default());\n\n// Create ADC driver on ADCx\nlet mut adc = adc::Adc::new(p.ADCx);\n\n// Configure resolution, averaging, and sample time\nadc.set_resolution(adc::Resolution::BITS14);\nadc.set_averaging(adc::Averaging::Samples1024);\nadc.set_sample_time(adc::SampleTime::CYCLES160_5);\n\nconst MAX_VALUE: u32 = adc::resolution_to_max_count(adc::Resolution::BITS14);\n"})}),"\n",(0,a.jsxs)(s.admonition,{type:"warning",children:[(0,a.jsx)(s.mdxAdmonitionTitle,{}),(0,a.jsx)(s.p,{children:"When reading the ADC, it is important to distinguish between the maximum digital count and the maximum input voltage. The function"}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"const MAX_VALUE: u32 = adc::resolution_to_max_count(adc::Resolution::BITS14);\n"})}),(0,a.jsx)(s.p,{children:"returns the largest integer code that the ADC can produce for a 14\u2011bit conversion."}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["For a 14\u2011bit ADC, the digital output spans from 0 to ",(0,a.jsx)(s.code,{children:"2^14 - 1 = 16383"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"MAX_VALUE"})," will therefore hold the value ",(0,a.jsx)(s.code,{children:"16383"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:["This is not the maximum voltage that the ADC can measure. The maximum voltage is determined by the reference voltage (e.g., 3.3 V), while ",(0,a.jsx)(s.code,{children:"MAX_VALUE"})," simply represents the highest possible digital code."]}),"\n"]})]}),"\n",(0,a.jsx)(s.p,{children:"Once we have the ADC and pin set up, we can start reading values from the pin. Here\u2019s a simple loop that reads the raw ADC value, converts it to a voltage, and prints it:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:'loop {\n    // Read a raw ADC value (blocking read)\n    let level: u16 = adc.blocking_read(&mut adc_pin);\n    let voltage = 3.3f32 * level as f32 / MAX_VALUE as f32;\n\n    info!("Light sensor reading: {}, voltage: {}", level, voltage);\n\n    // Wait a bit before reading again\n    embassy_time::Timer::after_secs(1).await;\n}\n'})}),"\n",(0,a.jsx)(s.h3,{id:"inter-integrated-circuit-i2c",children:"Inter-Integrated Circuit (I2C)"}),"\n",(0,a.jsxs)(s.p,{children:["The Inter-Integrated Circuit (I2C) is a synchronous, multi-controller/multi-target communication protocol. Similarly to the SPI, it allows data transfer between a controller and one or more peripheral ICs, but it uses only 2 wires (1 data line and 1 clock line, making it half-duplex) and has a different way of addressing the peripherals: using the their unique ",(0,a.jsx)(s.em,{children:"addresses"}),"."]}),"\n",(0,a.jsx)(s.h4,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"I2C_protocol",src:n(4891).A+"",width:"691",height:"221"})}),"\n",(0,a.jsx)(s.p,{children:"I2C transmission uses 2 lines:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"SCL"})," - ",(0,a.jsx)(s.strong,{children:"S"}),"erial ",(0,a.jsx)(s.strong,{children:"CL"}),"ock line - clock is generated by the controller - used to synchronize communication between the controller and the targets"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"SDA"})," - ",(0,a.jsx)(s.strong,{children:"S"}),"erial ",(0,a.jsx)(s.strong,{children:"DA"}),"ta line - carries data between the controller and the addressed target","\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["targets read data from SDA ",(0,a.jsx)(s.strong,{children:"only"})," when the clock is ",(0,a.jsx)(s.em,{children:"low"})]}),"\n",(0,a.jsxs)(s.li,{children:["targets write data to SDA ",(0,a.jsx)(s.strong,{children:"only"})," when the clock is ",(0,a.jsx)(s.em,{children:"high"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(s.admonition,{type:"info",children:(0,a.jsxs)(s.p,{children:["The communication is ",(0,a.jsx)(s.em,{children:"half-duplex"}),". This means that data is transmitted only in one direction at a time, since there is only ",(0,a.jsx)(s.em,{children:"one"})," data line that can be used both for sending data to the target and receiving data from the target."]})}),"\n",(0,a.jsxs)(s.admonition,{type:"info",children:[(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"SDA"})," and ",(0,a.jsx)(s.code,{children:"SCL"})," wires are never actually driven (set to ",(0,a.jsx)(s.code,{children:"LOW"}),"/",(0,a.jsx)(s.code,{children:"HIGH"}),") by the controller/peripherals. The line is controlled by either pulling the line low or releasing the line high."]}),(0,a.jsxs)(s.p,{children:["When the line is ",(0,a.jsx)(s.em,{children:"pulled down"}),", this means that it is tied directly to ",(0,a.jsx)(s.code,{children:"GND"}),". This electronically translates to ",(0,a.jsx)(s.code,{children:"LOW"}),"."]}),(0,a.jsxs)(s.p,{children:["When the line is ",(0,a.jsx)(s.em,{children:"released"}),", or ",(0,a.jsx)(s.em,{children:"pulled up"}),", this means that it ties back to ",(0,a.jsx)(s.code,{children:"3V3"}),' (which we can consider as being the "default" state of the wire) through a pull-up resistor. This electronically translates to ',(0,a.jsx)(s.code,{children:"HIGH"}),"."]}),(0,a.jsxs)(s.p,{children:["This is called ",(0,a.jsx)(s.em,{children:"open-drain connection"}),". You can read more about how it works ",(0,a.jsx)(s.a,{href:"https://www.ti.com/lit/an/sbaa565/sbaa565.pdf?ts=1712891793335#:~:text=I2C%20is%20a%20two%2Dwire,and%20receive%20commands%20and%20data.",children:"here"}),", at section 2.2."]})]}),"\n",(0,a.jsx)(s.h4,{id:"data-transmission",children:"Data transmission"}),"\n",(0,a.jsxs)(s.p,{children:["Each target is associated with a unique ",(0,a.jsx)(s.em,{children:"address"}),". The controller uses this address to initiate communication with that target. This address can either be 7 or 10 bits."]}),"\n",(0,a.jsx)(s.h5,{id:"initiation",children:"Initiation"}),"\n",(0,a.jsxs)(s.p,{children:["Before the transmission, both the ",(0,a.jsx)(s.code,{children:"SCL"})," and ",(0,a.jsx)(s.code,{children:"SDA"})," lines are set to ",(0,a.jsx)(s.code,{children:"HIGH"}),". First thing the controller does is to signal a ",(0,a.jsx)(s.code,{children:"start"})," condition by pulling the ",(0,a.jsx)(s.code,{children:"SDA"})," line to ",(0,a.jsx)(s.code,{children:"LOW"}),". All targets understand that the communication is about to commence and listen on the ",(0,a.jsx)(s.code,{children:"SDA"})," line. Next, the controller starts the clock and begins to write the address of the target it wants to talk to, followed by a command bit that signifies whether the controller wants to ",(0,a.jsx)(s.em,{children:"read"})," from the target or ",(0,a.jsx)(s.em,{children:"write"})," to it. Whichever target recognizes its address, responds with an ",(0,a.jsx)(s.code,{children:"ACK"})," (acknowledged), by pulling the ",(0,a.jsx)(s.code,{children:"SDA"})," to ",(0,a.jsx)(s.code,{children:"LOW"}),". If no target responds and the ",(0,a.jsx)(s.code,{children:"SDA"})," stays ",(0,a.jsx)(s.code,{children:"HIGH"}),", then it is considered a ",(0,a.jsx)(s.code,{children:"NACK"})," (not acknowledged). Afterwards, the data transmission can begin."]}),"\n",(0,a.jsx)(s.h5,{id:"transmission",children:"Transmission"}),"\n",(0,a.jsxs)(s.p,{children:["Depending on the command bit (R/W), either the controller or the target begins to send data over the ",(0,a.jsx)(s.code,{children:"SDA"})," line. Data is sent one byte at a time, and then acknowledged by the receiver. One sequence of a data byte and ",(0,a.jsx)(s.code,{children:"ack"})," is called a ",(0,a.jsx)(s.em,{children:"frame"}),"."]}),"\n",(0,a.jsx)(s.p,{children:"During the communication, data can be:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["written to the ",(0,a.jsx)(s.code,{children:"SDA"})," line ",(0,a.jsx)(s.em,{children:"only"})," when ",(0,a.jsx)(s.code,{children:"SCL"})," is ",(0,a.jsx)(s.code,{children:"LOW"})," or"]}),"\n",(0,a.jsxs)(s.li,{children:["read from the ",(0,a.jsx)(s.code,{children:"SDA"})," line ",(0,a.jsx)(s.em,{children:"only"})," when ",(0,a.jsx)(s.code,{children:"SCL"})," is ",(0,a.jsx)(s.code,{children:"HIGH"}),"."]}),"\n"]}),"\n",(0,a.jsx)(s.h5,{id:"end",children:"End"}),"\n",(0,a.jsxs)(s.p,{children:["To end the transmission, the controller signals a ",(0,a.jsx)(s.code,{children:"stop"})," condition. This is done by releasing the ",(0,a.jsx)(s.code,{children:"SCL"})," line to ",(0,a.jsx)(s.code,{children:"HIGH"}),", and then also releasing the ",(0,a.jsx)(s.code,{children:"SDA"})," line. Since data can be written ",(0,a.jsx)(s.em,{children:"only"})," when ",(0,a.jsx)(s.code,{children:"SCL"})," is ",(0,a.jsx)(s.code,{children:"LOW"}),", the target understands that this is a special event, that means that the communication has ended."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"i2c_transmission",src:n(7517).A+"",width:"810",height:"90"})}),"\n",(0,a.jsxs)(s.admonition,{type:"note",children:[(0,a.jsxs)(s.p,{children:["For 10-bit addresses, the controller first issues a specific sequence of bits. This sequence is reserved, therefore targets with 7-bit addresses are prohibited from having addresses that start with this sequence. These bits mark the fact that the controller is attempting to initiate communication with a target with a 10-bit address, so all 7-bit targets ignore the ",(0,a.jsx)(s.code,{children:"SDA"})," line once they recognize this sequence. After the special sequence, the controller sends the upper 2 bits of the address, then waits for an ",(0,a.jsx)(s.code,{children:"ack"})," from the target(s) that have an address that begins with these 2 bits. Afterwards, it sends the rest of the address, and waits for an acknowledgement from the target."]}),(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"i2c_transmission_10_bit",src:n(6507).A+"",width:"1160",height:"90"})})]}),"\n",(0,a.jsx)(s.h4,{id:"i2c-in-embassy",children:"I2C in Embassy"}),"\n",(0,a.jsxs)(s.p,{children:["These are the I2C imports we will be using. We will use the functions provided by the ",(0,a.jsx)(s.code,{children:"embedded_hal"})," crate, since these are standard and used by most frameworks."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"use embassy_stm32::i2c::I2c;\nuse embassy_stm32::{bind_interrupts, i2c, peripherals};\n"})}),"\n",(0,a.jsx)(s.p,{children:"We start by initializing the peripherals."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"let peripherals = embassy_stm32::init(Default::default());\n"})}),"\n",(0,a.jsx)(s.p,{children:"Next, we declare the pins we will be using for the SDA and SCL lines. We can find which pins of the STM32 Nucleo-U545RE-Q have these functions by looking at the pinout."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"let sda = peripherals.PXn;\nlet scl = peripherals.PYm;\n"})}),"\n",(0,a.jsx)(s.p,{children:"We then initialize our I2C instance, using the pins we defined earlier and a default configuration. It's recommended to use the asynchronous version, since it won't block the executor."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"let mut i2c = I2c::new(peripherals.I2C1, sda, scl, Irqs, p.GPDMA1_CH0, p.GPDMA1_CH1, Default::default());\n"})}),"\n",(0,a.jsxs)(s.p,{children:["The first argument of the ",(0,a.jsx)(s.code,{children:"new"})," function is the I2C channel that will be used. There are multiple I2C channels on the STM32 Nucleo-U545RE-Q, and depending on which pins we decided to use, we can see which channel they are on by looking at the pinout."]}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"Irqs"})," variable refers to the interrupt that the I2C driver will use when handling transfers. We also need to bind this interrupt, which depends on the I2C channel we are working with."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"bind_interrupts!(struct Irqs {\n    I2C1_EV => i2c::EventInterruptHandler<peripherals::I2C1>;\n    I2C1_ER => i2c::ErrorInterruptHandler<peripherals::I2C1>;\n});\n"})}),"\n",(0,a.jsx)(s.h4,{id:"reading-from-a-target",children:"Reading from a target"}),"\n",(0,a.jsxs)(s.p,{children:["To read from a target, we will be using the ",(0,a.jsx)(s.code,{children:"read_async"})," function of the I2C driver."]}),"\n",(0,a.jsx)(s.p,{children:"The function takes 2 parameters:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"the address of the target we are attempting to receive the data from"}),"\n",(0,a.jsxs)(s.li,{children:["the ",(0,a.jsx)(s.em,{children:"receiving"})," buffer in which we will store the data received from the target"]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["The following example reads two bytes from the target of address ",(0,a.jsx)(s.code,{children:"0x44"}),"."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"const TARGET_ADDRESS: u16 = 0x44;\nlet mut rx_buf = [0x00u8; 2];\ni2c.read(TARGET_ADDR, &mut rx_buf).await.unwrap();\n"})}),"\n",(0,a.jsx)(s.h4,{id:"writing-to-a-target",children:"Writing to a target"}),"\n",(0,a.jsxs)(s.p,{children:["To write data to a target, we will be using the ",(0,a.jsx)(s.code,{children:"write_async"})," function of the I2C driver."]}),"\n",(0,a.jsx)(s.p,{children:"This function also takes 2 parameters:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"the address of the target we are attempting to transmit the data to"}),"\n",(0,a.jsxs)(s.li,{children:["the ",(0,a.jsx)(s.em,{children:"transmitting"})," buffer that contains the data we want to send to the target"]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["The following example writes two bytes to the target of address ",(0,a.jsx)(s.code,{children:"0x44"}),"."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"const TARGET_ADDR: u16 = 0x44;\nlet tx_buf = [0x01, 0x05];\ni2c.write(TARGET_ADDR, &tx_buf).await.unwrap();\n"})}),"\n",(0,a.jsxs)(s.admonition,{type:"info",children:[(0,a.jsxs)(s.p,{children:["We can also use ",(0,a.jsx)(s.code,{children:"write_read"})," if we want to perform both a write and a read one after the other."]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"i2c.write_read(TARGET_ADDR, &tx_buf, &mut rx_buf).await.unwrap();\n"})})]}),"\n",(0,a.jsx)(s.h2,{id:"tasks",children:"Tasks"}),"\n",(0,a.jsx)(s.admonition,{title:"Important",type:"danger",children:(0,a.jsxs)(s.p,{children:["As this is an embedded workshop, you will need to make several connections using the provided male-to-male wires. ",(0,a.jsx)(s.strong,{children:"Do not power the board"})," without asking an assistant if it is ok to do so."]})}),"\n",(0,a.jsxs)(s.p,{children:["Before you start with writing code, make sure you register your team in this ",(0,a.jsx)(s.a,{href:"https://docs.google.com/spreadsheets/d/1wVNxWiOeCw_OBxBlQvEoAUpePjKxQL9dRNmtNhi3-aE/edit?usp=sharing",children:"spreadsheet"}),"."]}),"\n",(0,a.jsxs)(s.p,{children:['A skeleton application, which prints "Hello" can be found in this ',(0,a.jsx)(s.a,{href:"https://github.com/UPB-RustWorkshop/embedded-nov-2025",children:"repository"}),". It should already include everything you will need for today's workshop, in regards of external dependencies. Go ahead and clone it locally. In order to run it, you will need to actually connect the LED to the specified pin, using one of the provided male-to-male cables. For the LED, you can use any of the exposed LED's labeled ",(0,a.jsx)(s.code,{children:"RED"}),", ",(0,a.jsx)(s.code,{children:"GREEN"}),", ",(0,a.jsx)(s.code,{children:"BLUE"})," and ",(0,a.jsx)(s.code,{children:"YELLOW"}),". Then you can run the following command:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"cargo run --bin demo\n"})}),"\n",(0,a.jsx)(s.admonition,{title:"Important",type:"danger",children:(0,a.jsxs)(s.p,{children:["Throughout this section, you will find multiple ",(0,a.jsx)(s.code,{children:"HINT"}),"s, please try to solve the tasks yourself. The hints should be there as a last resort, after you have spent a few minutes being ",(0,a.jsx)(s.strong,{children:"stuck"}),", and are not supposed to be a shortcut in order to speedrun the workshop. Keep in mind that you can only solve a task once, and once read, a hint cannot be unread."]})}),"\n",(0,a.jsx)(s.h3,{id:"hi-i-am-new-here",children:"Hi, I am new here!"}),"\n",(0,a.jsxs)(s.p,{children:["For your first task, you will need to print your team's name in terminal using the ",(0,a.jsx)(s.a,{href:"https://crates.io/crates/defmt",children:"defmt"})," whenever you press any of the four buttons labeled ",(0,a.jsx)(s.code,{children:"S1"}),", ",(0,a.jsx)(s.code,{children:"S2"}),", ",(0,a.jsx)(s.code,{children:"S3"})," and ",(0,a.jsx)(s.code,{children:"S4"}),"."]}),"\n",(0,a.jsx)(s.h4,{id:"baby-steps",children:"Baby steps"}),"\n",(0,a.jsxs)(s.p,{children:["You should begin by printing something in terminal. Take a look at the ",(0,a.jsx)(s.a,{href:"https://defmt.ferrous-systems.com",children:"defmt book"}),"."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.a,{href:"/docs/embassy/hints#hi-i-am-new-here---hint-01",children:(0,a.jsx)(s.code,{children:"HINT"})})}),"\n",(0,a.jsx)(s.h4,{id:"use-the-button",children:"Use the button"}),"\n",(0,a.jsxs)(s.p,{children:["Try to incorporate one button into your application. You will need to ",(0,a.jsx)(s.code,{children:"await"})," a button press, and then print the message in a continuous loop. Check the Embassy's ",(0,a.jsx)(s.a,{href:"https://docs.embassy.dev/embassy-stm32/git/stm32u545re/exti/struct.ExtiInput.html",children:(0,a.jsx)(s.code,{children:"ExtiInput"})})," documentation. Try to use one of the asynchronous functions, as it will be easier to extend it. Make sure you don't forget to wire the button."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.a,{href:"/docs/embassy/hints#hi-i-am-new-here---hint-02",children:(0,a.jsx)(s.code,{children:"HINT"})})}),"\n",(0,a.jsx)(s.h4,{id:"now-lets-use-em-all",children:"Now let's use 'em all"}),"\n",(0,a.jsxs)(s.p,{children:["You can combine multiple futures using the ",(0,a.jsx)(s.code,{children:"select"})," and ",(0,a.jsx)(s.code,{children:"join"})," functions exposed by the ",(0,a.jsx)(s.a,{href:"https://docs.embassy.dev/embassy-futures/git/default/index.html",children:(0,a.jsx)(s.code,{children:"embassy-futures"})})," crate."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.a,{href:"/docs/embassy/hints#hi-i-am-new-here---hint-03",children:(0,a.jsx)(s.code,{children:"HINT"})})}),"\n",(0,a.jsx)(s.h3,{id:"sing-your-own-tune",children:"Sing your own tune!"}),"\n",(0,a.jsxs)(s.p,{children:["This task requires singing one song of your desire, using the ",(0,a.jsx)(s.strong,{children:"active buzzer"})," located on the board."]}),"\n",(0,a.jsx)(s.h4,{id:"configure-the-pwm",children:"Configure the PWM"}),"\n",(0,a.jsxs)(s.p,{children:["You will need to a PWM output pin. In order to do that, you will need to decide what pin to use, and figure out what PWM Channel it is using. In order to do that, you will need to consult the ",(0,a.jsx)(s.a,{href:"https://www.st.com/resource/en/datasheet/stm32u545ce.pdf",children:"datasheet"}),". The Embassy's PWM api can be consulted ",(0,a.jsx)(s.a,{href:"https://docs.embassy.dev/embassy-stm32/git/stm32u545re/lptim/pwm/struct.Pwm.html",children:"here"}),"."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.a,{href:"/docs/embassy/hints#sing-your-own-tune---hint-01",children:(0,a.jsx)(s.code,{children:"HINT"})})}),"\n",(0,a.jsx)(s.h4,{id:"a-crumb-of-music-theory",children:"A crumb of music theory?"}),"\n",(0,a.jsx)(s.p,{children:"In music, note duration can be"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"whole note - lasts 4 beats"}),"\n",(0,a.jsx)(s.li,{children:"half note - lasts 2 beats"}),"\n",(0,a.jsx)(s.li,{children:"quarte note - lasts one beat"}),"\n",(0,a.jsx)(s.li,{children:"eight note - lasts half a beat"}),"\n",(0,a.jsx)(s.li,{children:"sixteenth note - last a quarter of a beat"}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["Notes can also be ",(0,a.jsx)(s.em,{children:"dotted"}),', which means that its duration is increased by half of its initial "play time". (e.g a dotted half note, which would usually last 2 beats will last 3 beats).']}),"\n",(0,a.jsxs)(s.p,{children:["We already have implemented the ",(0,a.jsx)(s.code,{children:"Note"})," enum for you, which you can find in the ",(0,a.jsx)(s.code,{children:"src/music.rs"})," module. It has variants for every standard piano note, and the value of each variant is the frequency of the respective note."]}),"\n",(0,a.jsx)(s.h4,{id:"a-bunch-of-constants",children:"A bunch of constants"}),"\n",(0,a.jsxs)(s.p,{children:["Next, we will need to define the duration of a ",(0,a.jsx)(s.strong,{children:"whole note"}),". To do that, we will need to determine the ",(0,a.jsx)(s.strong,{children:"tempo"}),". The tempo differs from song to song, and it is measured in beats per minute. For now, we will use a ",(0,a.jsx)(s.strong,{children:"100 BPM tempo"}),". Based on this, a whole note duration should be ",(0,a.jsx)(s.strong,{children:"4 x beat_duration_ms = 4 * (60_000 ms / TEMPO)"}),"."]}),"\n",(0,a.jsxs)(s.p,{children:["The microcontroller runs at ",(0,a.jsx)(s.code,{children:"150 MHz"}),". This frequency is quite high, and that will be a problem when trying to match a note frequency using a ",(0,a.jsx)(s.code,{children:"64"})," divider to slow it down. You will need to do so using the PWM ",(0,a.jsx)(s.code,{children:"Config"}),"."]}),"\n",(0,a.jsx)(s.h4,{id:"playing-one-octave",children:"Playing one octave"}),"\n",(0,a.jsx)(s.p,{children:"Our representation of one song will be an array of tuples:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"const SONG: [(Option<Note>, i8); LEN] = {\n    (Some(Note::A0), 8),\n    (Some(Note::B2), 4),\n    (None, 1),\n    ...\n}\n"})}),"\n",(0,a.jsxs)(s.p,{children:["A song is composed of either notes or pauses, which is why we chose to use the ",(0,a.jsx)(s.code,{children:"Option"})," enum, and we chose to represent its length as fractions of the whole note (meaning that a ",(0,a.jsx)(s.code,{children:"(None, 4)"})," represents a pause of a quarter of a note and a ",(0,a.jsx)(s.code,{children:"(Some(Note::A2), 2)"})," is a half note A2). We omitted the dotted notes, and to represent them, we will use the negative counterparts of the notes. Therefore, ",(0,a.jsx)(s.code,{children:"(Some(Note::C2), -2)"})," will be treated as a dotted C2 half note."]}),"\n",(0,a.jsxs)(s.p,{children:["In the ",(0,a.jsx)(s.code,{children:"music.rs"})," module, you will find already defined an 8 note array that represents an octave. You will need to connect the buzzer to a pin, that you will configure as PWM output. Then, you need to iterate over the array and figure out the duration of the note based on the above mentioned convention and \"play\" it, by configuring the timer's frequency in order to get a signal of matching the note's frequency, and a ",(0,a.jsx)(s.strong,{children:"duty cycle of 50%"}),". In order to mimic a real instrument, for the last 10% of the note duration we will turn off the buzzer."]}),"\n",(0,a.jsxs)(s.p,{children:["Even though there are no ",(0,a.jsx)(s.em,{children:"pause"})," notes, handling them now will help you later."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.a,{href:"/docs/embassy/hints#sing-your-own-tune---hint-03",children:(0,a.jsx)(s.code,{children:"HINT"})})}),"\n",(0,a.jsx)(s.h4,{id:"finally-some-good-music",children:"Finally, some good music"}),"\n",(0,a.jsxs)(s.p,{children:["Pick a song and try to play it. You can find some examples already implemented in C, using the same conventions ",(0,a.jsx)(s.a,{href:"https://github.com/robsoncouto/arduino-songs/tree/master",children:"here"}),"."]}),"\n",(0,a.jsx)(s.h3,{id:"my-own-thermometer",children:"My own thermometer!"}),"\n",(0,a.jsxs)(s.p,{children:["For this task, you need to implement a ",(0,a.jsx)(s.em,{children:"basic"})," thermometer, that will read the ambient pressure and communicate it using the RGB LED. It will display a color ranging from ",(0,a.jsx)(s.strong,{children:"blue"})," to ",(0,a.jsx)(s.strong,{children:"red"}),", depending how close the temperature's value is to the minimum threshold (20\xb0C) and the maximum threshold (35\xb0C)."]}),"\n",(0,a.jsx)(s.p,{children:"RGB LEDs are made of 3 separate LEDs (one for each color channel) that are controlled individually. They come in two different configurations:"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"RGB LEDs",src:n(9045).A+"",width:"1000",height:"569"})}),"\n",(0,a.jsxs)(s.p,{children:["The one on the board is a ",(0,a.jsx)(s.strong,{children:"common anode"}),", and because of that the LEDs are off when the signal is high, and are at maximum intensity when the signal is low."]}),"\n",(0,a.jsx)(s.h4,{id:"disco-party",children:"Disco party"}),"\n",(0,a.jsxs)(s.p,{children:["Start by making the LED fade from blue to red. Remember what you learned at the previous exercise about configuring a PWM channel and ",(0,a.jsx)(s.strong,{children:"do not forget to wire the LED"})," using the sockets labeled ",(0,a.jsx)(s.code,{children:"RGB_RED"}),", ",(0,a.jsx)(s.code,{children:"RGB_GREEN"})," and ",(0,a.jsx)(s.code,{children:"RGB_BLUE"}),"."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.a,{href:"/docs/embassy/hints#the-temperature-is-rising---hint-01",children:(0,a.jsx)(s.code,{children:"HINT"})})}),"\n",(0,a.jsx)(s.h4,{id:"the-temperature-is-rising",children:"The temperature is rising"}),"\n",(0,a.jsxs)(s.p,{children:["To read the temperature, we wil use the ",(0,a.jsx)(s.strong,{children:"BMP280"})," temperature and pressure sensor. You can find its datasheet ",(0,a.jsx)(s.a,{href:"https://www.bosch-sensortec.com/media/boschsensortec/downloads/datasheets/bst-bmp280-ds001.pdf",children:"here"}),", and we highly encourage you to open it. The interaction with the sensor will be handled by the ",(0,a.jsx)(s.code,{children:"bmp280"})," module. You will need to explore it a bit, in order to figure out what is it's api. The module exposes two submodules, ",(0,a.jsx)(s.code,{children:"i2c"})," and ",(0,a.jsx)(s.code,{children:"spi"}),", depending on the underlying communication protocol you want to use. For this workshop, we will use ",(0,a.jsx)(s.strong,{children:"I2C"}),", because it only requires you to connect the ",(0,a.jsx)(s.code,{children:"BMP_SCL"})," and ",(0,a.jsx)(s.code,{children:"BMP_SDA"})," to two I2C capable pins."]}),"\n",(0,a.jsxs)(s.p,{children:["Instantiate the ",(0,a.jsx)(s.code,{children:"I2C"})," bus providing the two pins ",(0,a.jsx)(s.code,{children:"SCA"})," and ",(0,a.jsx)(s.code,{children:"SDL"})," and the respective peripheral (",(0,a.jsx)(s.code,{children:"I2C0"})," or ",(0,a.jsx)(s.code,{children:"I2C1"}),") and a default config. Then instantiate the ",(0,a.jsx)(s.code,{children:"BMP280"})," and set the control options, (power mode and pressure and temperature oversampling rate). You will also need to bind the interrupt for the I2C peripheral (",(0,a.jsx)(s.code,{children:"I2CX_EV"})," and ",(0,a.jsx)(s.code,{children:"I2CX_ER"}),", where ",(0,a.jsx)(s.code,{children:"X"})," is the peripheral number), using the ",(0,a.jsx)(s.code,{children:"bind_interrupt!"})," macro. You can find an example in its ",(0,a.jsx)(s.a,{href:"https://docs.embassy.dev/embassy-stm32/git/stm32u545re/macro.bind_interrupts.html",children:"documentation"}),"."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.a,{href:"/docs/embassy/hints#the-temperature-is-rising---hint-02",children:(0,a.jsx)(s.code,{children:"HINT"})})}),"\n",(0,a.jsx)(s.h4,{id:"the-last-step",children:"The last step"}),"\n",(0,a.jsx)(s.p,{children:"Now, combine the two into a solution."}),"\n",(0,a.jsx)(s.h3,{id:"smile-and-wave",children:"Smile and Wave!"}),"\n",(0,a.jsxs)(s.p,{children:["For your last challenge, you will need to use the joystick, to ",(0,a.jsx)(s.em,{children:"wave"})," the servo motor's arm. What you need to know, is that the joystick has 2 potentiometers ",(0,a.jsx)(s.em,{children:'"under the hood"'}),", one for each axis. You will need to configure the two ADC channels to read the joystick position, and use PWM to control the servomotor."]}),"\n",(0,a.jsx)(s.admonition,{title:"Joystick wiring",type:"danger",children:(0,a.jsxs)(s.p,{children:["Ignore the fact that label shows an input voltage of 5V, and use the ",(0,a.jsx)(s.strong,{children:"3V3"})," to power it. Otherwise, you risk damaging the board."]})}),"\n",(0,a.jsxs)(s.p,{children:["For this task, you are on your own... Feel free to use the ",(0,a.jsx)(s.a,{href:"/docs/embassy/#documentation",children:"Documentation"})," provided by us, the materials on Embassy available on the internet, including their official Github, or other repos. The only thing you get is this last ",(0,a.jsx)(s.a,{href:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",children:(0,a.jsx)(s.code,{children:"HINT"})}),"."]})]})}function o(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},9045:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/common_anode_common_cathode-ce7bd74b3251fdefd860a43293453a4f.png"},9687:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/pwm_rp2040_example-25843139fb0e6b4d0cb5b1e385005a4b.png"},9983:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/servo_wires-a2275ca73009abf09069bfe67692cb2a.png"}}]);